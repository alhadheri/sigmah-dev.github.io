<!DOCTYPE html>
<html lang="en" dir="ltr">

<!-- Mirrored from wiki.sigmah.org/doku.php?do=export_xhtml&id=translationguide by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 05 Jul 2018 16:54:04 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset="utf-8" />
  <title>translationguide</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="translationguide"/>
<link rel="search" type="application/opensearchdescription+xml" href="lib/exe/opensearch.php" title="Sigmah wiki"/>
<link rel="start" href="index.html"/>
<link rel="contents" href="doku810d.html?id=translationguide&amp;do=index" title="Sitemap"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="feed8be0.php?mode=list&amp;ns="/>
<link rel="alternate" type="text/html" title="Plain HTML" href="doku9f26.html?do=export_xhtml&amp;id=translationguide"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="translationguide6475.txt?do=export_raw&amp;id=translationguide"/>
<link rel="canonical" href="dokubf2f.html?id=translationguide"/>
<link rel="stylesheet" type="text/css" href="lib/exe/cssaf43.css?t=dokuwiki&amp;tseed=74cd2fc0434d10331b9bc01ea3827dea"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"id":"translationguide","namespace":""};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="lib/exe/jquery1d4f.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="lib/exe/jsaf43.php?t=dokuwiki&amp;tseed=74cd2fc0434d10331b9bc01ea3827dea"></script>
<!--<![endif]-->
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="#introduction">Introduction</a></div></li>
<li class="level1"><div class="li"><a href="#guidelines_for_translators">Guidelines for translators</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="#pootle_user_manual">Pootle User manual</a></div></li>
<li class="level2"><div class="li"><a href="#lessons_learnt_for_translators">Lessons learnt for translators</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="#guidelines_for_pootle_admin">Guidelines for Pootle admin</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="#internationalization_files_location">Internationalization files location</a></div></li>
<li class="level2"><div class="li"><a href="#source_strings_removal">Source strings removal</a></div></li>
<li class="level2"><div class="li"><a href="#file_upload">File upload</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#files_importation_order">Files importation order</a></div></li>
<li class="level3"><div class="li"><a href="#update_source_strings_of_a_translation_project">Update source strings of a translation project</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="#importing_files_from_translators_into_the_code">Importing files from translators into the code</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="introduction">Introduction</h1>
<div class="level1">

<p>
Some lessons have been learnt while translating Sigmah internationalization files, and this wiki page is here to share them for new translators.
</p>

<p>
Sigmah is using the Pootle online software translation platform for translation. Our Pootle server is located at <strong><a href="http://pootle.sigmah.org/" class="urlextern" title="http://pootle.sigmah.org/" rel="nofollow">http://pootle.sigmah.org/</a></strong>
</p>

<p>
<em>After two years of kind free hosting on Sahana HFOSS own Pootle server, we have shifted to our own server because the latest 2.5 Pootle version they migrated to is buggy with Java .properties based projects. Thanks Sahana again for those 2 years of kind hosting! Our Poootle server remains with old 2.1.5 version.</em>
</p>

</div>
<!-- EDIT1 SECTION "Introduction" [0-624] -->
<h1 class="sectionedit2" id="guidelines_for_translators">Guidelines for translators</h1>
<div class="level1">

</div>
<!-- EDIT2 SECTION "Guidelines for translators" [625-656] -->
<h2 class="sectionedit3" id="pootle_user_manual">Pootle User manual</h2>
<div class="level2">

<p>
The community of the Liferay project has written a good introduction guide for Pootle. You can read the following and replace each word “Liferay” by “Sigmah” and you&#039;ll get a user manuel !
</p>

<p>
<strong><a href="http://www.liferay.com/community/wiki/-/wiki/Main/Translating+Liferay+using+Pootle" class="urlextern" title="http://www.liferay.com/community/wiki/-/wiki/Main/Translating+Liferay+using+Pootle" rel="nofollow">Pootle User manual</a></strong>for project Liferay
</p>

</div>
<!-- EDIT3 SECTION "Pootle User manual" [657-1000] -->
<h2 class="sectionedit4" id="lessons_learnt_for_translators">Lessons learnt for translators</h2>
<div class="level2">
<ol>
<li class="level1"><div class="li">  <strong>Validate initial “fuzzy” translations</strong> When starting the translation of a new version of the software in an already existing language (ie: translation of Sigmah v2.0 in Spanish which reuses the translation of Sigmah v1.2), the translators should in most cases validate all the translations marked as “fuzzy”. Those translations are marked as fuzzy due to some technical reasons while importing all the translations from the previous versions. So, those translations should not be revised because the users are used to the former translations, and the user guide has been written using the former translation.</div>
</li>
<li class="level2"><div class="li">  <strong>In doubt for a translation? <em>Solution 1</em></strong> Look at the string code (the text written at the top of your string translation box in very small font), it could give you an hint about what exactly is the usage of the string you have to translate (ie: the string “Calendar” has for code “projectTabCalendar”, so the translator can get that this word is used for the tab named “Calendar” in a project page).</div>
</li>
<li class="level2"><div class="li">  <strong>In doubt for a translation? <em>Solution 2</em></strong> Write a comment, and send your translation as “Fuzzy” (“Approximatif” in French). If the software release on which you&#039;re working is not planned to be a public one, you can also add the string number as a suffix to your translation to see where this string is used in Sigmah.</div>
</li>
<li class="level2"><div class="li">  <strong>No simple quote (&#039;) in the UIMessages and MailModels files</strong>: applies to <code>MailModels</code> and <code>UIMessages</code> files, and does not apply to <code>UIConstants</code> files. We know, it is not obvious and natural when you&#039;re typing… but the exported file from Pootle won&#039;t do the job for you, and if you don&#039;t enter the simple quote by pairs (<code> instead of &#039; (ie: -window</code>s title- instead of -window&#039;s title-)), the file generated from your translation will break the build. Of course, your file will be controlled before being used in the code, but two controls are always better than only one. :)</div>
</li>
<li class="level2"><div class="li">  Don&#039;t set “My Account &gt; Settings &gt; Number of rows” to a value more than 16. Due to a bug in Pootle, if your number of rows exceeds the number of strings in one translation file, Pootle won&#039;t be able to open to you the screen for some strings of that short file. In Sigmah, the <code>MailMessages</code> file contains only 16 strings, so you can&#039;t have the “My Account &gt; Settings &gt; Number of rows” to a value greater than 16.</div>
</li>
</ol>

</div>
<!-- EDIT4 SECTION "Lessons learnt for translators" [1001-3408] -->
<h1 class="sectionedit5" id="guidelines_for_pootle_admin">Guidelines for Pootle admin</h1>
<div class="level1">

</div>
<!-- EDIT5 SECTION "Guidelines for Pootle admin" [3409-3440] -->
<h2 class="sectionedit6" id="internationalization_files_location">Internationalization files location</h2>
<div class="level2">

<p>
The internationalization files are the following ones:
</p>
<ul>
<li class="level1"><div class="li"> <code>src\main\resources\org\sigmah\client\i18n\UIConstants.properties</code></div>
</li>
<li class="level1"><div class="li"> <code>src\main\resources\org\sigmah\client\i18n\UIConstants_$$.properties</code></div>
</li>
<li class="level1"><div class="li"> <code>src\main\resources\org\sigmah\client\i18n\UIMessages.properties</code></div>
</li>
<li class="level1"><div class="li"> <code>src\main\resources\org\sigmah\client\i18n\UIMessages_$$.properties</code></div>
</li>
<li class="level1"><div class="li"> <code>src\main\resources\org\sigmah\server\mail\model\MailModels.properties</code></div>
</li>
<li class="level1"><div class="li"> <code>src\main\resources\org\sigmah\server\mail\model\MailModels_$$.properties</code></div>
</li>
</ul>

<p>
For understanding the difference between the files with a language code suffix (“<code>_$$</code>” stands for “<code>_es</code>”, “<code>_fr</code>”, etc.), see <a href="doku032a.html?id=contributorguide:contributionrules#rules_for_coordination_with_translators" class="wikilink1" title="contributorguide:contributionrules">Rules for coordination with translators</a> .
</p>

</div>
<!-- EDIT6 SECTION "Internationalization files location" [3441-4231] -->
<h2 class="sectionedit7" id="source_strings_removal">Source strings removal</h2>
<div class="level2">

<p>
Do not remove source strings from the property files. Static analysis via the Java will safely identify unused methods in the UIConstants and UIMessages interfaces. Removal of unused methods should be conducted periodically by the development team.
</p>

</div>
<!-- EDIT7 SECTION "Source strings removal" [4232-4510] -->
<h2 class="sectionedit8" id="file_upload">File upload</h2>
<div class="level2">

<p>
The management of the file upload, in the “Overview” tab of the language translation project, can be quite tricky and is not very intuitive in the first place.
</p>

<p>
A good general lesson to remember is: “<strong>a <code>*</code>.properties file for first importation, and XLIFF generated file for second one</strong>”.
</p>

</div>
<!-- EDIT8 SECTION "File upload" [4511-4820] -->
<h3 class="sectionedit9" id="files_importation_order">Files importation order</h3>
<div class="level3">

<p>
The first importation of a file in a language takes as granted that you send this file as a new source file in the original language for this new translation project. The name of the file has to be strictly the same as the potential similar one in other language, in order to let translators be able to see translations of a string in all available languages. You have to go to the “Files” tab of the language translation project and click on “Rescan project files” to actually process this source file.
</p>

<p>
All second importations are taken as importation of translations, if similar file name exist, and no more as import of source file, whatever the option used for importation.
</p>

</div>
<!-- EDIT9 SECTION "Files importation order" [4821-5532] -->
<h3 class="sectionedit10" id="update_source_strings_of_a_translation_project">Update source strings of a translation project</h3>
<div class="level3">

<p>
<em>NB: since you need to use the command “Review the project&#039;s files” in the procedure to update the source strings of a file, you always need to update the strings of all the files of a translation project because this command has effect on all files of the project and can put the other files of your project in an incoherent status.</em>
</p>

<p>
<em>NB2: the UIConstants file is so big that it creates issues on importing its translation into Pootle: Pootle returns a “502 Proxy Error” (Reason: Error reading from remote server) before the end of step 5 below. As a consequence, not all translated strings are updated. And from different trials, you will get a different number of remaining strings to translate. Advices to reach the maximum number of old strings automatically translated again : (i) import XLIFF file of UIContacts before other XLIFF files, (ii) try several times…</em>
</p>

<p>
To update source strings of a translation project, the following procedure has to be used:
</p>
<ol>
<li class="level1"><div class="li"> Export as XLIFF all the files of your translation project (with the command “Translate offline” in the “Review” tab of the translation project)</div>
</li>
<li class="level1"><div class="li"> Delete all the files of your translation project (action available in the “Files” tab of the translation project)</div>
</li>
<li class="level1"><div class="li"> Import your new version of the source files containing the new source strings (with the file upload available in the “Overview” tab of the translation project, and any option can be used for the upload as it is a first importation)</div>
</li>
<li class="level1"><div class="li"> Analyze your imported files (with the command “Review the project&#039;s files” in the “Files” tab of the translation project)</div>
</li>
<li class="level1"><div class="li"> Import then your just generated XLIFF files with the option “Merge”, and force the upload to the new source files you&#039;ve just added.</div>
</li>
</ol>

</div>
<!-- EDIT10 SECTION "Update source strings of a translation project" [5533-7319] -->
<h2 class="sectionedit11" id="importing_files_from_translators_into_the_code">Importing files from translators into the code</h2>
<div class="level2">

<p>
Things to take in mind:
</p>
<ul>
<li class="level1"><div class="li"> For all language except English, rename the <code>*.properties</code> exported files from Pootle with the suffix of the target language (<code>_fr</code>, <code>_es</code> so far).</div>
</li>
<li class="level1 node"><div class="li"> Check that the <code>UIMessages</code> and <code>MailModels</code> files exported from Pootle do not contain any simple quote (&#039;) (or triple quotes…) which is not doubled (this does not apply to <code>UIConstants</code>). Each simple quote should be preceded by a second one (<code> instead of &#039; (ie: -window</code>s title- instead of -window&#039;s title-)). Two solutions for that:</div>
<ul>
<li class="level2"><div class="li"> In Pootle, you can use the “singlequoting” option of the “Review” tab of your translation project to see faster all strings which have translated with a different number of single quotes. But this solution actually works poorly…</div>
</li>
<li class="level2"><div class="li"> In your advanced text editor (like Notepad++), you can search for any single/triple quote with this regular expression: <code>(^[&#039;][^&#039;]|[^&#039;][&#039;]$|[^&#039;][&#039;][^&#039;]|&#039;&#039;&#039;)</code></div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Check that the <code>UIMessages</code> files have all required parameters. Easiest almost exhaustive solution for this check is to search for all <code>{1}</code> in the files: if there is a {1} without a {0} in the same string, it should be corrected.</div>
</li>
<li class="level1"><div class="li"> An update of your working copy of the source code is naturally required.</div>
</li>
<li class="level1"><div class="li"> Check for potential conflicts with the current copy in the source code repository.</div>
</li>
</ul>

</div>
<!-- EDIT11 SECTION "Importing files from translators into the code" [7320-] --></div>
</body>

<!-- Mirrored from wiki.sigmah.org/doku.php?do=export_xhtml&id=translationguide by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 05 Jul 2018 16:54:04 GMT -->
</html>
