<!DOCTYPE html>
<html lang="en" dir="ltr">

<!-- Mirrored from wiki.sigmah.org/doku.php?do=export_xhtml&id=contributorguide:contributionrules by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 05 Jul 2018 16:55:40 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset="utf-8" />
  <title>contributorguide:contributionrules</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="contributorguide,contributionrules"/>
<link rel="search" type="application/opensearchdescription+xml" href="lib/exe/opensearch.php" title="Sigmah wiki"/>
<link rel="start" href="index.html"/>
<link rel="contents" href="dokub3fe.html?id=contributorguide:contributionrules&amp;do=index" title="Sitemap"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="feed3c04.php?mode=list&amp;ns=contributorguide"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="doku2ed5.html?do=export_xhtml&amp;id=contributorguide:contributionrules"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="contributionrules8543.txt?do=export_raw&amp;id=contributorguide:contributionrules"/>
<link rel="canonical" href="doku032a.html?id=contributorguide:contributionrules"/>
<link rel="stylesheet" type="text/css" href="lib/exe/cssaf43.css?t=dokuwiki&amp;tseed=74cd2fc0434d10331b9bc01ea3827dea"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='contributorguide';var JSINFO = {"id":"contributorguide:contributionrules","namespace":"contributorguide"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="lib/exe/jquery1d4f.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="lib/exe/jsaf43.php?t=dokuwiki&amp;tseed=74cd2fc0434d10331b9bc01ea3827dea"></script>
<!--<![endif]-->
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="#contribution_rules">Contribution rules</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="#introduction">Introduction</a></div></li>
<li class="level2"><div class="li"><a href="#user_experience_guidelines">User experience guidelines</a></div></li>
<li class="level2"><div class="li"><a href="#good_source-code_collaboration_rules_with_git">Good source-code collaboration rules with git</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#make_your_work_easy_to_merge">Make your work easy to merge</a></div></li>
<li class="level3"><div class="li"><a href="#show_the_world_github_is_social">Show the world! Github is social.</a></div></li>
<li class="level3"><div class="li"><a href="#git_hub_good_practices">Git(hub) good practices</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="#schema_upgrade">Schema upgrade</a></div></li>
<li class="level2"><div class="li"><a href="#rules_for_coordination_with_translators">Rules for coordination with translators</a></div></li>
<li class="level2"><div class="li"><a href="#code_style">Code style</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="contribution_rules">Contribution rules</h1>
<div class="level1">

</div>
<!-- EDIT1 SECTION "Contribution rules" [0-24] -->
<h2 class="sectionedit2" id="introduction">Introduction</h2>
<div class="level2">

<p>
This page gathers all the rules and habits that have been taken by the contributors on the Sigmah code.
It is useful to read it as an introduction when joining the project, to be acknowledgeed of how to fit your contribution in the same trend, in order to keep the development and the final perception of the user homogeneous.
</p>

<p>
Later on, if you perceive explicitly a new habit or wants to describe an implicit rule, you&#039;re welcome to update this page !
</p>

</div>
<!-- EDIT2 SECTION "Introduction" [25-495] -->
<h2 class="sectionedit3" id="user_experience_guidelines">User experience guidelines</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li">Avoid to display in final release buttons or link to non-working or half-working part of the application: users will always get disappointed that something is not working yet.</div>
</li>
</ul>

</div>
<!-- EDIT3 SECTION "User experience guidelines" [496-707] -->
<h2 class="sectionedit4" id="good_source-code_collaboration_rules_with_git">Good source-code collaboration rules with git</h2>
<div class="level2">

<p>
We are several organizations and individuals working at the same time on the Sigmah codebase. To make this collaboration smooth for everyone requires the respect of several good housekeeping rules on our Git source code management.
</p>

</div>
<!-- EDIT4 SECTION "Good source-code collaboration rules with git" [708-990] -->
<h3 class="sectionedit5" id="make_your_work_easy_to_merge">Make your work easy to merge</h3>
<div class="level3">

<p>
If you want your contribution to be welcomed, make sure you publish your work in a friendly manner.
</p>

<p>
Write good commit messages, explain what you did :
</p>
<ul>
<li class="level1"><div class="li"> concise summary on first line (imperative tone is shorter), blank line, and more explanation below</div>
</li>
<li class="level1 node"><div class="li"> <strong>Each commit must be linked to one and only one Sigmah Mantis issue</strong>: on the last lines of the commit message, mention the issue you have worked on with one of text pieces of this exhaustive list: <code>issue #1234</code>, <code>bug #1234</code>, <code>refs #1234</code>, <code>reports #1234</code> or if you want in the same time to set the issue as resolved you can use either <code>Fixes #1234</code>, <code>fixes #1234</code> or <code>resolves #1234</code></div>
<ul>
<li class="level2"><div class="li"> <strong>No reference to issue in source code comment</strong> The link to the issue needs only to be in the commit message. No need to add a comment in the modified part your source code with a reference to the issue because in the end it will be too complex to understand with many intricated issues applyed on the same area of the source code. Better to keep the link with issues in the Git log.</div>
</li>
<li class="level2"><div class="li"> <em>Side note:</em> before a branch is merged into the official Sigmah repo, there can be issues registered in alternative issue trackers for that specific branch. But each commit made on that branch must respect the rule of a compulsory link with a unique issue in Sigmah Mantis. For better understanding of all commit message history in Sigmah codebase, reference to issues in alternative issue trackers should be made in the commit message through the title of the issue and not its id.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> <a href="http://chris.beams.io/posts/git-commit/" class="urlextern" title="http://chris.beams.io/posts/git-commit/" rel="nofollow">read more</a> (and <a href="http://stackoverflow.com/questions/2290016" class="urlextern" title="http://stackoverflow.com/questions/2290016" rel="nofollow">more</a>)</div>
</li>
<li class="level1"><div class="li"> Favor more small commits over less commits: commit frequently (even for one-line modification) for every changes that are standalone: each committed change should keep the build stable.</div>
</li>
<li class="level1"><div class="li"> History should be easy for a human to understand what you actually did, the diff should show what are the actual changes (for example, don&#039;t change indentation and change code: do a first commit for indentation changes and another-one for the actual change. Do separate commit for a refactoring that do not change the application behavior)</div>
</li>
</ul>

</div>
<!-- EDIT5 SECTION "Make your work easy to merge" [991-3202] -->
<h3 class="sectionedit6" id="show_the_world_github_is_social">Show the world! Github is social.</h3>
<div class="level3">

<p>
To prevent merge conflicts, the more you anticipate merging, the more your contribution is likely to be accepted.
</p>
<ul>
<li class="level1"><div class="li">Publish your work, push often on your public repo (so others can see what you are doing, and may warn you of something)</div>
</li>
<li class="level1"><div class="li">The earlier, the better. Submit pull-request as soon as a non-breaking changes has been done. We want your work of value, even if it&#039;s just a refactoring. The earlier it is merged, the more other contributor will base their work upon it, preventing conflicting modifications.</div>
</li>
<li class="level1"><div class="li">Get early code review by creating pull-requests early and mark them as “WIP” (work-in-progress), pull-requests marked as WIP won&#039;t be merged, you can continue working on it and it won&#039;t be merged but you can get comments of other experienced Sigmah contributors (better know if you are on the wrong way fast)</div>
</li>
</ul>

</div>
<!-- EDIT6 SECTION "Show the world! Github is social." [3203-4068] -->
<h3 class="sectionedit7" id="git_hub_good_practices">Git(hub) good practices</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li">Check your commit integrity: the author must be the actual author of the code (pseudo are OK as long as you keep the same identity for all your contributions)</div>
</li>
<li class="level1"><div class="li">Keep the graph simple: try <code>pull --ff</code> the official repo <code>master</code> in your fork <code>master</code> frequently to be up-to-date. Merge only when necessary. Rebase your local commit/branches as you want but do not rebase already pushed commits (or you might create duplicate commits)</div>
</li>
<li class="level1 node"><div class="li">We aim at maintaining short-lived branches/forks:</div>
<ul>
<li class="level2"><div class="li">Favor committing refactoring tasks first so it can be integrated early to prevent merge conflicts, even if the actual functionality code has not been started yet. Commit messages way starts with “Refactor …” to easily identify those</div>
</li>
</ul>
</li>
<li class="level1"><div class="li">One pull-request per functionality, one functionality per pull-request. Keep it simple and small.</div>
</li>
<li class="level1"><div class="li">You may not change <code>.gitignore</code> and <code>.gitattributes</code> files, it will probably be rejected in a pull-request. Any temporary or generated files should go to the <code>target</code> directory.</div>
</li>
<li class="level1"><div class="li">The main Sigmah repo may only be used by the URD team (and Code Lutin), you are encouraged to work on your very own public fork of the project (that&#039;s the github style). We encourage one fork/repo per contributing organization. Feel free to organize cooperation on your fork according to your organization preferences (feel free to create branches, plug your own CI server, etc…): we strongly encourage diversity of practices among teams working on Sigmah.</div>
</li>
</ul>

</div>
<!-- EDIT7 SECTION "Git(hub) good practices" [4069-5571] -->
<h2 class="sectionedit8" id="schema_upgrade">Schema upgrade</h2>
<div class="level2">

<p>
If you need to change the database schema to make your piece of code works, it&#039;s OK, but we want to keep a read-only history of all those modifications.
</p>

<p>
Your pull-request must come with a migration file, like <code>src/main/resources/db/migration/V1234__adding_a_table_to_store_my_super_anything.sql</code>. This file name contains the schema version, please just number it after the others files, and after the <code>__</code>, a brief description of your changes.
</p>

<p>
You can get more info in the <a href="http://flywaydb.org/documentation/" class="urlextern" title="http://flywaydb.org/documentation/" rel="nofollow">official Flyway documentation</a>.
</p>

</div>
<!-- EDIT8 SECTION "Schema upgrade" [5572-6136] -->
<h2 class="sectionedit9" id="rules_for_coordination_with_translators">Rules for coordination with translators</h2>
<div class="level2">
<ul>
<li class="level1 node"><div class="li">“<em>Developers develop &amp; translators translate</em>”: In order to reduce the risks of conflict on the <code>UIConstants</code>, <code>UIMessages</code> and <code>MailModels</code> properties files, developers should avoid to edit the translated version of them. The French or Spanish developers can write the translation in their mothertongue of the new strings they create as part of the comment of the string in the original file.</div>
<ul>
<li class="level2 node"><div class="li">In simpler words:</div>
<ul>
<li class="level3"><div class="li">Developers only add new strings at the end of the <code>***.properties</code> files (without suffix) in the part dedicated to the version on which they work, and if possible always with a comment which may include the translation in the mothertongue for Spanish or French developers</div>
</li>
<li class="level3"><div class="li">Developers should not edit the <code>***_$$.properties</code> files (with suffix)</div>
</li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li">“<em>Give context to all my strings</em>”: Translators <strong>love</strong> to have as much context as possible about what they have to translate, because it really helps their job. Thus, developers should try to add a comment (starting with the “#” character) on the line before <strong>each</strong> string they add. This comment should describe the string, and gives at best at least one screen in which it appears. It can also include the translation of the string in the mothertongue for French and Spanish developers.
</div>
</li>
<li class="level1"><div class="li">“<em>I delete code, I check the constant strings</em>”: Translators, as developers, don&#039;t like to work for no reason. So if a developer deletes some code containing an I18N string, and has a doubt whether this string is used anywhere else and could be deleted, he should check in ths code if this string is still used after his deletion. If it is no more used, it should be deleted.</div>
</li>
</ul>

</div>
<!-- EDIT9 SECTION "Rules for coordination with translators" [6137-7839] -->
<h2 class="sectionedit10" id="code_style">Code style</h2>
<div class="level2">

<p>
Well, we won&#039;t discuss about how to produce good code, there are thousands of great literature about the topic.
</p>

<p>
Here are few coding guidelines that you should consider:
</p>
<ul>
<li class="level1"><div class="li"> Immutability is preferred over mutability (<code>final</code> keyword is on nearly every variables and method parameters), it made the code safer</div>
</li>
<li class="level1"><div class="li"> Fail fast (check arguments and throwing IllegalArgumentException and the beginning of a method is better than letting something unexpected happen)</div>
</li>
<li class="level1"><div class="li"> Future-proofing, if you do things like <code>switch-case</code> or <code>else if</code> structures, always implements a good default (always have a <code>default:</code> case or <code>else</code> with throwing an Exception or something). Think about a future developer who adds an element to an enumeration and this same developer forget to add a case in your code, did the code fail fast with an exception telling that this enumeration element is not implemented or do your code silently fall in another case leading to an expected behavior? Make the future developer (future you?) happy.</div>
</li>
<li class="level1"><div class="li"> We don&#039;t have a dummy rule like “a Javadoc on every method” but please, remove all boiler-plate and generated comment (“Here be Javadoc”…) and put comments where the code is not self-explanatory</div>
</li>
<li class="level1"><div class="li"> We like self-explanatory code with long explicit variables names, favor understandability over concision</div>
</li>
<li class="level1"><div class="li"> Consistency: adopting the not-in-your-habits code-style of the rest of the class/package is better than having a class coded with different styles from a method to another (also know as “when in Rome, do as the Romans do”)</div>
</li>
<li class="level1 node"><div class="li"> When throwing an exception:</div>
<ul>
<li class="level2"><div class="li"> always add a message, always use a different message for different <code>throw</code> (it will help when analyzing a stacktrace even if the code raising the exception has moved)</div>
</li>
<li class="level2"><div class="li"> provide context that may be helpful to know the state of the application (ids, some variables values, configuration?)</div>
</li>
<li class="level2"><div class="li"> if exception is thrown in a <code>catch</code> clause, always include the root exception that lead to you throwing another exception</div>
</li>
</ul>
</li>
</ul>

</div>
<!-- EDIT10 SECTION "Code style" [7840-] --></div>
</body>

<!-- Mirrored from wiki.sigmah.org/doku.php?do=export_xhtml&id=contributorguide:contributionrules by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 05 Jul 2018 16:55:40 GMT -->
</html>
