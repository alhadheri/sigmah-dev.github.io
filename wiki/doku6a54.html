<!DOCTYPE html>
<html lang="en" dir="ltr">

<!-- Mirrored from wiki.sigmah.org/doku.php?do=export_xhtml&id=administratorguide:installingsigmah by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 05 Jul 2018 16:55:08 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset="utf-8" />
  <title>administratorguide:installingsigmah</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="administratorguide,installingsigmah"/>
<link rel="search" type="application/opensearchdescription+xml" href="lib/exe/opensearch.php" title="Sigmah wiki"/>
<link rel="start" href="index.html"/>
<link rel="contents" href="dokud2eb.html?id=administratorguide:installingsigmah&amp;do=index" title="Sitemap"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="feed9523.php?mode=list&amp;ns=administratorguide"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="doku6a54.html?do=export_xhtml&amp;id=administratorguide:installingsigmah"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="installingsigmah1d80.txt?do=export_raw&amp;id=administratorguide:installingsigmah"/>
<link rel="canonical" href="doku1ba3.html?id=administratorguide:installingsigmah"/>
<link rel="stylesheet" type="text/css" href="lib/exe/cssaf43.css?t=dokuwiki&amp;tseed=74cd2fc0434d10331b9bc01ea3827dea"/>
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='administratorguide';var JSINFO = {"id":"administratorguide:installingsigmah","namespace":"administratorguide"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="lib/exe/jquery1d4f.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="lib/exe/jsaf43.php?t=dokuwiki&amp;tseed=74cd2fc0434d10331b9bc01ea3827dea"></script>
<!--<![endif]-->
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="#introduction">Introduction</a></div></li>
<li class="level1"><div class="li"><a href="#installing_sigmah_on_a_windows_platform">Installing Sigmah on a Windows platform</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="#prerequisites">Prerequisites</a></div></li>
<li class="level2"><div class="li"><a href="#preparing_the_sigmah_database">Preparing the Sigmah database</a></div></li>
<li class="level2"><div class="li"><a href="#installing_sigmah">Installing Sigmah</a></div></li>
<li class="level2"><div class="li"><a href="#creating_your_first_organization">Creating your first organization</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#for_version_22_and_more">For version 2.2 and more</a></div></li>
<li class="level3"><div class="li"><a href="#for_versions_up_to_v21">For versions up to v2.1</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="#your_installation_of_sigmah_is_fully_finished">Your installation of Sigmah is fully finished!</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="#installing_sigmah_on_ubuntu">Installing Sigmah on Ubuntu</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="#prerequisites1">Prerequisites</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#install_the_java_jre_environment">Install the java jre environment</a></div></li>
<li class="level3"><div class="li"><a href="#download_and_install_tomcat">Download and install Tomcat</a></div></li>
<li class="level3"><div class="li"><a href="#install_postresql">Install PostreSQL</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="#preparing_the_sigmah_database1">Preparing the Sigmah Database</a></div></li>
<li class="level2"><div class="li"><a href="#installing_sigmah_and_creating_your_first_organization">Installing Sigmah and creating your first organization</a></div></li>
<li class="level2"><div class="li"><a href="#other_issues">Other issues</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="introduction">Introduction</h1>
<div class="level1">

<p>
This installation guide describes the technical procedure to follow to install Sigmah.
</p>

<p>
If you want to install Sigmah just for a trial purpose, you might be interested to know that Sigmah has a live demo available at: <a href="http://demo.sigmah.org/" class="urlextern" title="http://demo.sigmah.org" rel="nofollow">http://demo.sigmah.org</a> . You might also be interested to read about the the <a href="http://www.sigmah.org/organisational-use#sigmah_central" class="urlextern" title="http://www.sigmah.org/organisational-use#sigmah_central" rel="nofollow">Sigmah Central service</a> if you want to use Sigmah but are in doubt whether you have the human or financial capacities to maintain such a system.
</p>

<p>
This installation guide only covers installation of Sigmah both on a Windows and on a Linux (ubuntu) platforms.
</p>

</div>
<!-- EDIT1 SECTION "Introduction" [0-629] -->
<h1 class="sectionedit2" id="installing_sigmah_on_a_windows_platform">Installing Sigmah on a Windows platform</h1>
<div class="level1">

</div>
<!-- EDIT2 SECTION "Installing Sigmah on a Windows platform" [630-674] -->
<h2 class="sectionedit3" id="prerequisites">Prerequisites</h2>
<div class="level2">

<p>
For better performance and security, it is recommended to maintain an installation environment for Sigmah with latest versions of the 3 key components it requires. Those components and the known minimum required version are:
</p>
<ul>
<li class="level1"><div class="li"> <strong>Java 1.8 and above</strong>: visit <a href="http://www.java.com/" class="urlextern" title="http://www.java.com" rel="nofollow">http://www.java.com</a> to download and get installation procedures for the Java runtime environment (if you have a 64bit environment, be sure to download a x64 version which will produce <code>Java HotSpot(tm) 64-Bit Server VM</code> in reply to <code>java -version</code>)</div>
</li>
<li class="level1"><div class="li"> <strong>PostgreSQL 9 and above</strong>: download and run the One-click-installer available at <a href="http://www.postgresql.org/download/windows" class="urlextern" title="http://www.postgresql.org/download/windows" rel="nofollow">http://www.postgresql.org/download/windows</a> to get your copy of the PostgreSQL relational database management system (<em>tip</em>: when installing the database, give all the rights to your database user). For the rest of this procedure, we&#039;ll assume that the PostgreSQL database will be installed on same server as application server (database server name will be <strong>localhost</strong>), and that to connect to the database man should use the default port number  <strong>5432</strong>. NB : it seems that Postgres doesn&#039;t worked properlly when installed on C:/Program Files (it seems better to install it at directly at the root C:/, especially on windows 7)</div>
</li>
<li class="level1"><div class="li"> <strong>Tomcat 7 and above</strong>: download and get installation procedures of the Tomcat Java application server at <a href="http://tomcat.apache.org/index.html" class="urlextern" title="http://tomcat.apache.org/index.html" rel="nofollow">http://tomcat.apache.org/index.html</a> . NB : Sigmah does work also properly with Jetty application server</div>
</li>
</ul>

</div>
<!-- EDIT3 SECTION "Prerequisites" [675-2138] -->
<h2 class="sectionedit4" id="preparing_the_sigmah_database">Preparing the Sigmah database</h2>
<div class="level2">
<ol>
<li class="level1"><div class="li">Download the MinimumDataKit SQL file of the latest version of Sigmah at <a href="https://github.com/sigmah-dev/sigmah/releases/latest" class="urlextern" title="https://github.com/sigmah-dev/sigmah/releases/latest" rel="nofollow">https://github.com/sigmah-dev/sigmah/releases/latest</a> .
</div>
</li>
<li class="level0"><div class="li">Create a new database on your PostgreSQL server (watch this <a href="http://www.youtube.com/watch?v=LR39-SWj87Q&amp;feature=related" class="urlextern" title="http://www.youtube.com/watch?v=LR39-SWj87Q&amp;feature=related" rel="nofollow">video to learn how to</a> ). For the rest of this procedure, we&#039;ll assume your database is called <code>sigmah_db</code>. We&#039;ll also assume that to access this new database your database username is &gt;<code>db_username</code>, and your database password is <code>db_password</code>.
</div>
</li>
<li class="level0"><div class="li">Run the MinimumDataKit SQL file in this new <code>sigmah_db</code> database, in the order given by their filename.</div>
</li>
</ol>

</div>
<!-- EDIT4 SECTION "Preparing the Sigmah database" [2139-2789] -->
<h2 class="sectionedit5" id="installing_sigmah">Installing Sigmah</h2>
<div class="level2">

<p>
<strong>1.</strong> Download the webapp archive (<code>*</code>.war) of the latest version of Sigmah at <a href="https://github.com/sigmah-dev/sigmah/releases/latest" class="urlextern" title="https://github.com/sigmah-dev/sigmah/releases/latest" rel="nofollow">https://github.com/sigmah-dev/sigmah/releases/latest</a> .
</p>

<p>
<strong>2.</strong> Create a folder in the <code>webapps</code> directory of your Tomcat installation. This folder will be used as context name for your Sigmah webapp. For the rest of this procedure, we&#039;ll assume that you&#039;ve created a webapp folder named <code>sigmah</code>. All paths, if the contrary is not explicitly specified, will be considered starting from the root of this <code>sigmah</code> folder.
</p>

<p>
<strong>3.</strong> Decompress the .war file into your just created <code>sigmah</code> folder.
</p>

<p>
<strong>4.</strong> Edit the file <code>WEB-INF/classes/META-INF/persistence.xml</code> and set the database parameters as the following for an installation using PostgreSQL as recommended: <em>(<strong>Notice</strong>: in v1.2 and earlier versions, the file to edit for database connection parameters was <code>WEB-INF/classes/sigmah.properties</code>)</em>
</p>
<pre class="code">
hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
hibernate.connection.driver_class=org.postgresql.Driver
hibernate.connection.username=db_username
hibernate.connection.password=db_password
hibernate.connection.url=jdbc:postgresql://localhost:5432/sigmah_db
hibernate.hbm2ddl.auto=update
hibernate.show_sql=false
hibernate.format_sql=false</pre>

<p>
<strong>5.</strong> Edit the file <code>WEB-INF/classes/sigmah.properties</code>, set the files management and mail parameters. Each folder set must of course exist before running Sigmah. Edit each key of the file as following:
</p>
<div class="table sectionedit6"><table class="inline">
	<tr class="row0">
		<td class="col0"> <strong>Key</strong> </td><td class="col1"> <strong>Supported versions</strong> </td><td class="col2"> <strong>Description</strong> </td>
	</tr>
	<tr class="row1">
		<td class="col0">:——–</td><td class="col1">:———————–</td><td class="col2">:—————-</td>
	</tr>
	<tr class="row2">
		<td class="col0"><em><code>files.repository.name</code></em></td><td class="col1 leftalign"> 2.0 and later          </td><td class="col2">Root directory name where files will be stored (ie: <code>repository.name=C:\\Sigmah-files</code>)</td>
	</tr>
	<tr class="row3">
		<td class="col0"><em><code>archives.repository.name</code></em></td><td class="col1 leftalign"> 2.0 and later          </td><td class="col2">Root directory name where backup archives are stored. (ie: <code>repository.name=C:\\Sigmah-files\\archives</code>) </td>
	</tr>
	<tr class="row4">
		<td class="col0"><em><code>files.upload.maxSize</code></em></td><td class="col1 leftalign"> 2.0 and later          </td><td class="col2">Maximumum size of the uploaded files in bytes (default: 20971520 (20MB) ) </td>
	</tr>
	<tr class="row5">
		<td class="col0"><em><code>mail.hostname</code></em></td><td class="col1 leftalign"> 1.0 and later          </td><td class="col2">SMTP hostname used to send emails by the application. (ie: <code>mail.hostname=smtp.myngo.org</code>)</td>
	</tr>
	<tr class="row6">
		<td class="col0"><em><code>mail.port</code></em></td><td class="col1 leftalign"> 1.1 and later          </td><td class="col2">SMTP port used to send emails by the application. (ie: <code>mail.port=25</code>)</td>
	</tr>
	<tr class="row7">
		<td class="col0"><em><code>mail.from.address</code></em></td><td class="col1 leftalign"> 1.0 and later          </td><td class="col2">SMTP sender email address used to send emails by the application. (ie: <code>mail.from.address=sigmah@myngo.org</code>)</td>
	</tr>
	<tr class="row8">
		<td class="col0"><em><code>mail.from.name</code></em></td><td class="col1 leftalign"> 1.0 and later          </td><td class="col2">SMTP sender name as shown to recipient used to send emails by the application (ie:<code>mail.from.name=Sigmah</code>)</td>
	</tr>
	<tr class="row9">
		<td class="col0"><em><code>mail.auth.username</code></em></td><td class="col1 leftalign"> 1.1 and later          </td><td class="col2">Username in case of a required authentication when using the given SMTP server (ie:<code>mail.auth.username=sigmah</code>)</td>
	</tr>
	<tr class="row10">
		<td class="col0"><em><code>mail.auth.password</code></em></td><td class="col1 leftalign"> 1.1 and later          </td><td class="col2">Password in case of a required authentication when using the given SMTP server (ie:<code>mail.auth.password=sig42mah</code>)</td>
	</tr>
	<tr class="row11">
		<td class="col0"><em><code>mail.encoding</code></em></td><td class="col1 leftalign"> 2.0 and later          </td><td class="col2"> Character encoding used in the emails generated by Sigmah (ie:<code>mail.encoding=UTF-8</code>)</td>
	</tr>
	<tr class="row12">
		<td class="col0"><em><code>mail.contentType</code></em></td><td class="col1 leftalign"> 2.0 and later          </td><td class="col2"> Content type used in the emails generated by Sigmah (ie:<code>mail.contentType=text/html</code>)</td>
	</tr>
	<tr class="row13">
		<td class="col0"><em><code>mail.support.to</code></em></td><td class="col1 leftalign"> 2.0 and later          </td><td class="col2"> E-mail address to which the <code>Report a bug</code> hyperlinks redirects to. (default:<code>mail.support.to=support@sigmah.org</code>)</td>
	</tr>
	<tr class="row14">
		<td class="col0"><em><code>mail.optimisation.to.address</code></em></td><td class="col1 leftalign"> 2.2 and later          </td><td class="col2"> E-mail address to which the <code>Software performance reports</code> are sent to. (default:<code>mail.optimisation.to.address=support@sigmah.org</code>)</td>
	</tr>
	<tr class="row15">
		<td class="col0"><em><code>mail.optimisation.copy.address</code></em></td><td class="col1 leftalign"> 2.2 and later          </td><td class="col2"> E-mail address to which the <code>Software performance reports</code> are sent to in CC. (default:<code>mail.optimisation.copy.address=</code>)</td>
	</tr>
	<tr class="row16">
		<td class="col0"><em><code>mail.optimisation.markdownfile.name</code></em></td><td class="col1 leftalign"> 2.2 and later          </td><td class="col2"> Filename for the Markdown <code>Software performance report</code> file. (default:<code>mail.optimisation.markdownfile.name=sigmah_performance_report.md</code>) </td>
	</tr>
	<tr class="row17">
		<td class="col0"><em><code>mail.optimisation.jsonfile.name</code></em></td><td class="col1 leftalign"> 2.2 and later          </td><td class="col2"> Filename for the JSON <code>Software performance report</code> file. (default:<code>mail.optimisation.jsonfile.name=sigmah_performance_brut_report.json</code>) </td>
	</tr>
	<tr class="row18">
		<td class="col0"><em><code>maps.key</code></em></td><td class="col1 leftalign"> 2.0 and later          </td><td class="col2"> Google Maps key </td>
	</tr>
	<tr class="row19">
		<td class="col0"><em><code>repository.images</code></em></td><td class="col1"> 1.0 - 1.2 </td><td class="col2 centeralign">  (<strong>deprecated</strong>: removed since 2.0)  </td>
	</tr>
	<tr class="row20">
		<td class="col0"><em><code>upload.maxSize</code></em></td><td class="col1 leftalign"> 1.2                    </td><td class="col2">Maximumum size of the uploaded files in bytes (<strong>deprecated</strong>: replaced by <code>files.upload.maxSize</code> since 2.0)</td>
	</tr>
	<tr class="row21">
		<td class="col0"><em><code>host.url</code></em></td><td class="col1 leftalign"> 1.1 - 1.2              </td><td class="col2"><abbr title="Uniform Resource Locator">URL</abbr> on which the Sigmah instance is running.This <abbr title="Uniform Resource Locator">URL</abbr> will be used widely on Sigmah. For example, we use the <abbr title="Uniform Resource Locator">URL</abbr>: <code>[host.url]/NewUserConfirm?userid1234/</code> to do the confirmation of new created user .<strong><em>Notice</em></strong>: Do not add any sign at the end. It should be like &#039;<a href="http://www.sigmah.org/" class="urlextern" title="http://www.sigmah.org" rel="nofollow">http://www.sigmah.org</a>&#039;,not &#039;<a href="http://www.sigmah.org/" class="urlextern" title="http://www.sigmah.org/" rel="nofollow">http://www.sigmah.org/</a>&#039;<strong>. (</strong>deprecated<strong>: removed since 2.0)</strong></td>
	</tr>
	<tr class="row22">
		<td class="col0"><em><code>default.interface</code></em></td><td class="col1 leftalign"> 1.1 - 1.2              </td><td class="col2">Interface switch between Sigmah &amp; ActivityInfo. This parameter MUST remain with value <code>default.interface=Sigmah</code><strong>. (</strong>deprecated<strong>: removed since 2.0)</strong></td>
	</tr>
	<tr class="row23">
		<td class="col0"><em><code>repository.file_storage_provider_class</code></em></td><td class="col1 leftalign"> 1.1 - 1.2              </td><td class="col2">Use <code>repository.file_storage_provider_class=org.sigmah.server.endpoint.file.LocalStorageProvider</code>, except if you install Sigmah on the Amazon platform. (<strong>deprecated</strong>: removed since 2.0) </td>
	</tr>
	<tr class="row24">
		<td class="col0"><em><code>repository.name</code></em></td><td class="col1 leftalign"> 1.1 - 1.2              </td><td class="col2">Root directory name where files will be stored (ie: <code>repository.name=C:\\Sigmah\\Files</code>) (<strong>deprecated</strong>: replaced by <code>files.repository.name</code> since 2.0)</td>
	</tr>
	<tr class="row25">
		<td class="col0"><em><code>repository.files</code></em></td><td class="col1 leftalign"> 1.0                    </td><td class="col2">Folder where the files uploaded by users will be stored. (ie: <code>repository.files=C:\\Sigmah\\Files</code>) (<strong>deprecated</strong>: replaced by <code>repository.name</code> since 1.1)</td>
	</tr>
	<tr class="row26">
		<td class="col0"><em><code>newUserConfirm.host.url</code></em></td><td class="col1 leftalign"> 1.0                    </td><td class="col2"> <abbr title="Uniform Resource Locator">URL</abbr> used in the confirmation email sent to new users, to confirm their registration. (ie: <code>newUserConfirm.host.url=http://www.myngo.org:8080/sigmah/NewUserConfirm?</code>) (<strong>deprecated</strong>: replaced by <code>host.url</code> since 1.1) </td>
	</tr>
</table></div>
<!-- EDIT6 TABLE [4261-8729] -->
<p>
<strong>6.</strong> (<strong>deprecated</strong>: step removed since v2.0) Edit the file <code>WEB-INF/classes/sigmah.client.js</code> and replace the GoogleMapsAPI key by a one you&#039;ve generated with your Google account at <a href="https://developers.google.com/maps/documentation/javascript/v2/introduction#Obtaining_Key" class="urlextern" title="https://developers.google.com/maps/documentation/javascript/v2/introduction#Obtaining_Key" rel="nofollow">https://developers.google.com/maps/documentation/javascript/v2/introduction#Obtaining_Key</a>
</p>

<p>
<strong>7.</strong> (<strong>deprecated</strong>: step removed since v2.0) Optionally, edit the file <code>WEB-INF/classes/log4j.properties</code> to specify your own path for the log file. If you want to do so, replace the value <code>activityinfo.log</code> of the key <code>log4j.appender.file.File</code> by the value you wish.
</p>

<p>
<strong>8.</strong> Start or reboot your Tomcat application server to make it deploy your new Sigmah webapp. To start the Tomcat application server, type the following command in the root folder of your Tomcat instance: <code>java -jar start.jar</code> (more information on web application deployment at <a href="http://wiki.eclipse.org/Tomcat/Howto/Deploy_Web_Applications" class="urlextern" title="http://wiki.eclipse.org/Tomcat/Howto/Deploy_Web_Applications" rel="nofollow">http://wiki.eclipse.org/Tomcat/Howto/Deploy_Web_Applications</a>)
</p>

<p>
<strong>9.</strong> Open your web-browser on the <code>/healthcheck</code> <abbr title="Uniform Resource Identifier">URI</abbr> to check the health of your new Sigmah server: if your server is running on localhost on port 8080, and if your webapp name is sigmah, then the full <abbr title="Uniform Resource Locator">URL</abbr> to test will be <a href="http://localhost:8080/sigmah/healthcheck" class="urlextern" title="http://localhost:8080/sigmah/healthcheck" rel="nofollow">http://localhost:8080/sigmah/healthcheck</a> . If healthcheck returns a blank page with only an “OK” message, your server is up and running properly!
</p>

<p>
Sigmah should be now technically installed on your server, congratulations! The procedure is almost finished: next step will be to create an organization and a first user (see below).
</p>

</div>
<!-- EDIT5 SECTION "Installing Sigmah" [2790-10184] -->
<h2 class="sectionedit7" id="creating_your_first_organization">Creating your first organization</h2>
<div class="level2">

</div>
<!-- EDIT7 SECTION "Creating your first organization" [10185-10224] -->
<h3 class="sectionedit8" id="for_version_22_and_more">For version 2.2 and more</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li">Edit the logo of your organization to produce a PNG file of 126&times;56 pixels, and save this file in the files folder of your Sigmah installation (ie: <code>C:\Sigmah\Files</code>). <em>(<strong>Notice</strong>: in v1.2 and earlier versions, there was a specific <code>images</code> folder to store logo on the filesystem, but since v2.0 all files including organisations&#039; logos are stored in a single folder)</em></div>
</li>
<li class="level1"><div class="li">Run the following SQL command by replacing all parameters with the right value through a call to psql command-line tool</div>
</li>
</ul>

<p>
<em>Call of psql command-line tool (called to be made from MS-DOS command line interface opened in the Postgres installation bin folder where the psql.exe executable is located) </em>
</p>
<pre class="code bash">psql <span class="re5">-U</span> db_username <span class="re5">-d</span> sigmah_db <span class="re5">-c</span> “<span class="kw1">select</span> create_new_organization<span class="br0">&#40;</span><span class="st_h">'p_organization_name'</span>,
 <span class="st_h">'p_organization_logo_filename'</span>, <span class="st_h">'p_headquarters_country_code'</span>, <span class="st_h">'p_user_email'</span>, 
<span class="st_h">'p_user_name'</span>, <span class="st_h">'p_user_first_name'</span>, <span class="st_h">'p_user_locale'</span><span class="br0">&#41;</span>;”</pre>

<p>
<em>SQL command description of the parameters</em>
</p>
<div class="table sectionedit9"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Parameter </th><th class="col1"> Description</th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 leftalign"> p_organization_name       </td><td class="col1"> The name of your organization </td>
	</tr>
	<tr class="row2">
		<td class="col0"> p_organization_logo_filename </td><td class="col1"> The filename of the logo (i.e. logo.png) </td>
	</tr>
	<tr class="row3">
		<td class="col0"> p_headquarters_country_code </td><td class="col1"> Use an ISO 2-letters code like “AF” from <a href="http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2#Officially_assigned_code_elements" class="urlextern" title="http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2#Officially_assigned_code_elements" rel="nofollow">Officially assigned code elements</a> </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> p_user_email              </td><td class="col1"> Your mail address </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> p_user_name               </td><td class="col1 leftalign"> Your name       </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> p_user_first_name          </td><td class="col1"> Your first name </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign"> p_user_locale             </td><td class="col1"> Must be “fr” or “en” or “es” don&#039;t include quotes (“) </td>
	</tr>
</table></div>
<!-- EDIT9 TABLE [11236-11844] -->
</div>
<!-- EDIT8 SECTION "For version 2.2 and more" [10225-11845] -->
<h3 class="sectionedit10" id="for_versions_up_to_v21">For versions up to v2.1</h3>
<div class="level3">

<p>
Follow this procedure:
</p>
<ol>
<li class="level1"><div class="li"> Download the sigmah-newOrganizationLaunchScript.postgresql.sql script from <a href="https://xn--github-9e0c.com/​sigmah-dev/​sigmah/​releases/​latest" class="urlextern" title="https://​github.com/​sigmah-dev/​sigmah/​releases/​latest" rel="nofollow">https://​github.com/​sigmah-dev/​sigmah/​releases/​latest</a> .	 </div>
</li>
<li class="level1"><div class="li"> Edit the logo of your organization to produce a PNG file of 126&times;56 pixels, and save this file in the files folder of your Sigmah installation (ie: <code>C:​\Sigmah\Files</code>). <em>(<strong>Notice</strong>:​ in v1.2 and earlier versions, there was a specific <code>images</code> folder to store logo on the filesystem, but since v2.0 all files including organisations&#039;​ logos are stored in a single folder)</em> </div>
</li>
<li class="level1"><div class="li"> Edit the script, and use the search&amp;​replace tool of your text editor to replace ​all the parameters (strings which starts and ends by a &#039;​§&#039;​) by the values you want to give to them.</div>
</li>
<li class="level1"><div class="li"> Run the following SQL command by replacing ​all parameters with the right value through ​a call to psql command-line tool.</div>
</li>
</ol>

<p>
<br/>

</p>

</div>
<!-- EDIT10 SECTION "For versions up to v2.1" [11846-12771] -->
<h2 class="sectionedit11" id="your_installation_of_sigmah_is_fully_finished">Your installation of Sigmah is fully finished!</h2>
<div class="level2">

<p>
You&#039;re ready to use it.
</p>

<p>
To start to use your Sigmah installation:
</p>
<ol>
<li class="level1"><div class="li"> Open your browser at <a href="http://localhost:8080/sigmah/" class="urlextern" title="http://localhost:8080/sigmah/" rel="nofollow">http://localhost:8080/sigmah/</a> (or another <abbr title="Uniform Resource Locator">URL</abbr> if you have not used all the default parameters suggested in this procedure)</div>
</li>
<li class="level1"><div class="li"> Enter the email used as parameter in the newOrganizationLaunchScript.postgresql.sql script, and “sigmah” as password.</div>
</li>
<li class="level1"><div class="li"> You&#039;re in!</div>
</li>
</ol>

</div>
<!-- EDIT11 SECTION "Your installation of Sigmah is fully finished!" [12772-13181] -->
<h1 class="sectionedit12" id="installing_sigmah_on_ubuntu">Installing Sigmah on Ubuntu</h1>
<div class="level1">

</div>
<!-- EDIT12 SECTION "Installing Sigmah on Ubuntu" [13182-13213] -->
<h2 class="sectionedit13" id="prerequisites1">Prerequisites</h2>
<div class="level2">

</div>
<!-- EDIT13 SECTION "Prerequisites" [13214-13233] -->
<h3 class="sectionedit14" id="install_the_java_jre_environment">Install the java jre environment</h3>
<div class="level3">
<pre class="code bash"><span class="kw2">sudo</span> <span class="kw2">apt-get install</span> default-jre</pre>

</div>
<!-- EDIT14 SECTION "Install the java jre environment" [13234-13328] -->
<h3 class="sectionedit15" id="download_and_install_tomcat">Download and install Tomcat</h3>
<div class="level3">

<p>
Currently, only Tomcat7 is provided through apt-get. But a more recent version does also work.
</p>
<pre class="code bash"><span class="kw2">sudo</span> <span class="kw2">apt-get install</span> tomcat7</pre>

</div>
<!-- EDIT15 SECTION "Download and install Tomcat" [13329-13510] -->
<h3 class="sectionedit16" id="install_postresql">Install PostreSQL</h3>
<div class="level3">
<pre class="code">
user@hostname:~$ sudo apt-get install postgresql
user@hostname:~$ sudo -i -u postgres
postgres@hostname:~$ psql
postgres=# CREATE USER sigmah;
# CREATE ROLE
postgres=# ALTER ROLE sigmah WITH CREATEDB;
# ALTER ROLE
postgres=# CREATE DATABASE sigmah_db OWNER sigmah;
# CREATE DATABASE
postgres=# ALTER USER sigmah WITH ENCRYPTED PASSWORD &#039;sigmah&#039;;
# ALTER ROLE
postgres=# \q
postgres@hostname:~$ [ctrl+d] to logout
user@hostname:~$</pre>

</div>

<h4 id="in_addition_for_sigmah_version_22_and_more">In addition, for Sigmah version 2.2 and more</h4>
<div class="level4">

<p>
In order to have v2.2 working, you also need to install the pg_trgm extension, and make the sigmah user able to create extension from it in its database (only solution for this: making it “superuser”).
</p>

<p>
Here is how to:
</p>
<pre class="code">
user@hostname:~$ sudo -i -u postgres
postgres@hostname:~$ psql
postgres=# ALTER ROLE sigmah SUPERUSER;
# ALTER ROLE
postgres=# \q
postgres@hostname:~$ [ctrl+d] to logout
user@hostname:~$ sudo apt-get install postgresql-contrib
user@hostname:~$ sudo /etc/init.d/postgresql restart</pre>

</div>
<!-- EDIT16 SECTION "Install PostreSQL" [13511-14541] -->
<h2 class="sectionedit17" id="preparing_the_sigmah_database1">Preparing the Sigmah Database</h2>
<div class="level2">

<p>
You can follow the “Preparing the Sigmah database” part to download the MinimumDataKit SQL file. Open a terminal and run the script.
</p>

<p>
Note: I got errors due to the escape caracter “\&#039;” not escaped… (i.e. “People\&#039;s”). I edited the file and removed them: “people\&#039;s” → “peoples”.
</p>
<pre class="code">
user@hostname:~$ psql -U sigmah -d sigmah_db -h localhost -f ./sigmah-MinimumDataKit-2.0.postgresql.sql
Password for user sigmah: </pre>

</div>
<!-- EDIT17 SECTION "Preparing the Sigmah Database" [14542-15001] -->
<h2 class="sectionedit18" id="installing_sigmah_and_creating_your_first_organization">Installing Sigmah and creating your first organization</h2>
<div class="level2">

<p>
You can follow the “Installing Sigmah” part of the process with following changes:
</p>

<p>
<strong> Steps 2. &amp; 3.: </strong>
The Tomcat <code>webapps</code> folder is <code>/var/lib/tomcat7/webapps/</code> on Ubuntu .
</p>
<ol>
<li class="level1"><div class="li"> Copy the .war file into this <code>webapps</code> folder</div>
</li>
<li class="level1"><div class="li"> Restart Tomcat (see below for howto) to be sure the war file will be autodeployed</div>
</li>
</ol>

<p>
Your webapp is now deployed, and you are ready to proceed with following steps where you should edit the configuration files.
</p>

<p>
<strong> Step 8.: </strong>
To start or restart Tomcat:
</p>
<pre class="code bash"><span class="kw2">sudo</span> <span class="sy0">/</span>etc<span class="sy0">/</span>init.d<span class="sy0">/</span>tomcat7 restart</pre>

</div>
<!-- EDIT18 SECTION "Installing Sigmah and creating your first organization" [15002-15607] -->
<h2 class="sectionedit19" id="other_issues">Other issues</h2>
<div class="level2">

<p>
<strong>PostgreSQL: when restarting PostgreSQL, I had an issue with the log file (missing the folder <em>/var/log/postgresql</em>):</strong>
</p>
<pre class="code">
user@hostname:/var/log$ sudo /etc/init.d/postgresql restart
* Restarting PostgreSQL 9.1 database server
* Error: Could not create log file /var/log/postgresql/postgresql-9.1-main.log

user@hostname:/var/log$ sudo mkdir postgresql
user@hostname:/var/log$ sudo chmod 777 postgresql/
user@hostname:/var/log$ sudo /etc/init.d/postgresql restart</pre>

<p>
See also: <a href="http://bugs.launchpad.net/ubuntu/+source/postgresql-common/+bug/1048664" class="urlextern" title="http://bugs.launchpad.net/ubuntu/+source/postgresql-common/+bug/1048664" rel="nofollow">http://bugs.launchpad.net/ubuntu/+source/postgresql-common/+bug/1048664</a>
</p>

</div>
<!-- EDIT19 SECTION "Other issues" [15608-] --></div>
</body>

<!-- Mirrored from wiki.sigmah.org/doku.php?do=export_xhtml&id=administratorguide:installingsigmah by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 05 Jul 2018 16:55:08 GMT -->
</html>
