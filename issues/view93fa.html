<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>

<!-- Mirrored from www.sigmah.org/issues/view.php?id=426&history=1 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 25 Jul 2018 15:50:55 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
	<link rel="stylesheet" type="text/css" href="css/default.html" />
	<script type="text/javascript"><!--
		if(document.layers) {document.write("<style>td{padding:0px;}<\/style>")}
	// --></script>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
	<meta http-equiv="Pragma" content="no-cache" />
	<meta http-equiv="Cache-Control" content="no-cache" />
	<meta http-equiv="Pragma-directive" content="no-cache" />
	<meta http-equiv="Cache-Directive" content="no-cache" />
	<meta http-equiv="Expires" content="Wed, 25 Jul 2018 15:18:00 GMT" />
	<link rel="shortcut icon" href="images/favicon.html" type="image/x-icon" />
	<link rel="search" type="application/opensearchdescription+xml" title="MantisBT: Text Search" href="browser_search_plugin84ae.html?type=text" />	<link rel="search" type="application/opensearchdescription+xml" title="MantisBT: Issue Id" href="browser_search_pluginb70d.html?type=id" />	<title>0000426: User preference for default dashboard project type - Sigmah Issue Tracker</title>
<script type="text/javascript" src="javascript/min/common.html"></script>
<script type="text/javascript">var loading_lang = "Loading...";</script><script type="text/javascript" src="javascript/min/ajax.js"></script>
<link rel="stylesheet" type="text/css" href="plugin_filea93c.css?file=Source/style.css"/></head>
<body>
<div align="left"><a href="my_view_page.html"><img border="0" alt="Sigmah Issue Tracker" src="images/sigmah-logo-Mantis.html" /></a></div><table class="hide"><tr><td class="login-info-left">Anonymous | <a href="login_pagea53e.html?return=%2Fissues%2Fview.php%3Fid%3D426%26history%3D1">Login</a> | <a href="signup_page.html">Signup for a new account</a></td><td class="login-info-middle"><span class="italic">2018-07-25 17:18 CEST</span></td><td class="login-info-right"><form method="post" name="form_set_project" action="http://www.sigmah.org/issues/set_project.php">Project: <select name="project_id" class="small" onchange="document.forms.form_set_project.submit();"><option value="0" selected="selected" >All Projects</option>
<option value="1">sigmah</option>
<option value="4">Sigmah Central</option>
</select> <input type="submit" class="button-small" value="Switch" /></form><a href="200_rss_Sigmah_Issue_Tracker_-_Issuesd41d.xml?"><img src="images/rss.html" alt="RSS" style="border-style: none; margin: 5px; vertical-align: middle;" /></a></td></tr></table><table class="width100" cellspacing="0"><tr><td class="menu"><a href="my_view_page.html">My View</a> | <a href="view_all_bug_page.html">View Issues</a> | <a href="changelog_page.html">Change Log</a> | <a href="roadmap_page.html">Roadmap</a> | <a href="plugina0e2.html?page=Source/index">Repositories</a> | <a href="account_page.html">My Account</a></td><td class="menu right nowrap"><form method="post" action="http://www.sigmah.org/issues/jump_to_bug.php"><input type="text" name="bug_id" size="10" class="small" value="Issue #" onfocus="if (this.value == 'Issue #') this.value = ''" onblur="if (this.value == '') this.value = 'Issue #'" />&#160;<input type="submit" class="button-small" value="Jump" />&#160;</form></td></tr></table><br /><table class="width100" cellspacing="1"><tr><td class="form-title" colspan="3">View Issue Details&#160;<span class="small"><span class="bracket-link">[&#160;<a href="#bugnotes">Jump to Notes</a>&#160;]</span> </span></td><td class="center"><span class="small"></span></td><td class="right" colspan="2"><span class="small"><span class="bracket-link">[&#160;<a href="view93fa.html?id=426&amp;history=1#history">Issue History</a>&#160;]</span> </span><span class="small"><span class="bracket-link">[&#160;<a href="print_bug_pageda67.html?bug_id=426">Print</a>&#160;]</span> </span></td></tr><tr><td class="category" width="15%">ID</td><td class="category" width="20%">Project</td><td class="category" width="15%">Category</td><td class="category" width="15%">View Status</td><td class="category" width="15%">Date Submitted</td><td class="category" width="20%">Last Update</td></tr><tr class="row-1"><td>0000426</td><td>sigmah</td><td>Administration</td><td>public</td><td>2011-12-13 15:23</td><td>2015-04-07 12:44</td></tr><tr class="spacer"><td colspan="6"></td></tr><tr class="row-2"><td class="category">Reporter</td><td>osarrat</td><td colspan="4">&#160;</td></tr><tr class="row-1"><td class="category">Assigned To</td><td>somzzz</td><td colspan="4">&#160;</td></tr><tr class="row-2"><td class="category">Priority</td><td>normal</td><td class="category">Severity</td><td>feature</td><td class="category">Reproducibility</td><td>always</td></tr><tr class="row-1"><td class="category">Status</td><td bgcolor="#c2dfff">assigned</td><td class="category">Resolution</td><td>open</td><td colspan="2">&#160;</td></tr><tr class="row-2"><td class="category">Platform</td><td></td><td class="category">OS</td><td></td><td class="category">OS Version</td><td></td></tr><tr class="row-1"><td class="category">Product Version</td><td>1.1</td><td colspan="4">&#160;</td></tr><tr class="row-2"><td class="category">Target Version</td><td>next-but-one</td><td class="category">Fixed in Version</td><td></td><td colspan="2">&#160;</td></tr><tr class="spacer"><td colspan="6"></td></tr><tr class="row-1"><td class="category">Summary</td><td colspan="5">0000426: User preference for default dashboard project type</td></tr><tr class="row-2"><td class="category">Description</td><td colspan="5">Some users are mainly dealing with &quot;Funding&quot; project, others with &quot;Local partner&quot; ones.<br />
For those users, to have an option in their user profile to choose which option to display by default would be useful. That way, they would open Sigmah with their main concern first.</td></tr><tr class="row-1"><td class="category">Tags</td><td colspan="5">No tags attached.</td></tr><tr class="spacer"><td colspan="6"></td></tr><tr class="row-2"><td class="category">User Report URL</td><td colspan="5"></td></tr><tr class="row-1"><td class="category">OS</td><td colspan="5">NA</td></tr><tr class="row-2"><td class="category">Other OS</td><td colspan="5"></td></tr><tr class="row-1"><td class="category">Browser</td><td colspan="5">NA</td></tr><tr class="row-2"><td class="category">Other browser</td><td colspan="5"></td></tr><tr class="row-1"><td class="category">ScreenURL</td><td colspan="5"></td></tr><tr class="row-2"><td class="category">(ActivityInfo) Noticed in revision</td><td colspan="5"></td></tr><tr class="spacer"><td colspan="6"></td></tr><tr class="row-1"><td class="category"><a name="attachments" id="attachments" />Attached Files</td><td colspan="5"><a href="0004260212.patch?file_id=170&amp;type=bug"><img src="images/fileicons/text.html" alt="patch file icon" width="16" height="16" border="0" /></a>&#160;<a href="0004260212.patch?file_id=170&amp;type=bug">000426.patch</a> [<a href="0004260212.patch?file_id=170&amp;type=bug" target="_blank">^</a>] (11,917 bytes) <span class="italic">2014-05-22 21:47</span><script type="text/javascript" language="JavaScript">
<!--
function swap_content( span ) {
displayType = ( document.getElementById( span ).style.display == 'none' ) ? '' : 'none';
document.getElementById( span ).style.display = displayType;
}

 -->
 </script> <span id="hideSection_170">[<a class="small" href='#' id='attmlink_170' onclick='swap_content("hideSection_170");swap_content("showSection_170");return false;'>Show Content</a>]</span> <span style='display:none' id="showSection_170">[<a class="small" href='#' id='attmlink_170' onclick='swap_content("hideSection_170");swap_content("showSection_170");return false;'>Hide Content</a>]<pre>Index: /src/main/java/org/sigmah/shared/dto/UserDTO.java
===================================================================
--- /src/main/java/org/sigmah/shared/dto/UserDTO.java	(Revision 1564)
+++ /src/main/java/org/sigmah/shared/dto/UserDTO.java	Fri May 16 00:38:24 2014
@@ -63,6 +63,14 @@
     	set(&quot;locale&quot;, locale);
     }
     
+    public String getProjectPreference() {
+    	return get(&quot;projectPref&quot;);
+    }
+    
+    public void setProjectPreference(String projectPref) {
+    	set(&quot;projectPref&quot;, projectPref);
+    }
+    
     public OrgUnitDTO getOrgUnitWithProfiles() {
         return get(&quot;orgUnit&quot;);
     }

Index: /src/main/java/org/sigmah/shared/domain/User.java
===================================================================
--- /src/main/java/org/sigmah/shared/domain/User.java	(Revision 1564)
+++ /src/main/java/org/sigmah/shared/domain/User.java	Thu May 15 23:54:55 2014
@@ -33,6 +33,7 @@
     private String name;
     private boolean newUser;
     private String locale;
+    private String projectPref;
     private String changePasswordKey;
     private Date dateChangePasswordKeyIssued;
     private String hashedPassword;
@@ -98,7 +99,7 @@
     public void setLocale(String locale) {
         this.locale = locale;
     }
-
+    
     /**
      * Gets the user's password, hashed with the BCrypt algorithm.
      * 
@@ -139,6 +140,15 @@
 
     public Boolean isActive() {
         return isActive;
+    }
+    
+    @Column(name = &quot;ProjectPref&quot;, nullable = false, length = 10)
+    public String getProjectPreference() {
+        return this.projectPref;
+    }
+
+    public void setProjectPreference(String projectPref) {
+        this.projectPref = projectPref;
     }
 
     /**


Index: /src/main/java/org/sigmah/client/page/admin/users/form/UserSigmahForm.java
===================================================================
--- /src/main/java/org/sigmah/client/page/admin/users/form/UserSigmahForm.java	(Revision 1564)
+++ /src/main/java/org/sigmah/client/page/admin/users/form/UserSigmahForm.java	Thu May 15 23:55:16 2014
@@ -24,6 +24,7 @@
 import org.sigmah.shared.dto.UserDTO;
 import org.sigmah.shared.dto.profile.ProfileDTO;
 import org.sigmah.shared.dto.profile.ProfileDTOLight;
+import com.allen_sauer.gwt.log.client.Log;
 
 import com.extjs.gxt.ui.client.Style.Scroll;
 import com.extjs.gxt.ui.client.event.ButtonEvent;
@@ -68,6 +69,7 @@
 	private final SimpleComboBox&lt;String&gt; localeField;
 	private final ComboBox&lt;OrgUnitDTOLight&gt; orgUnitsList;
 	private final ListStore&lt;OrgUnitDTOLight&gt; orgUnitsStore;
+	private final SimpleComboBox&lt;String&gt; projectPreferenceField;
 	private final ComboBox&lt;ProfileDTOLight&gt; profilesListCombo;
 	private final Map&lt;Integer, ClickableLabel&gt; selectedProfiles = new HashMap&lt;Integer, ClickableLabel&gt;();
 	private final List&lt;Integer&gt; selectedProfilesIds = new ArrayList&lt;Integer&gt;();
@@ -76,7 +78,7 @@
 	private HashMap&lt;String, Object&gt; newUserProperties;
 	private int num = 0;
 
-	private final static int LABEL_WIDTH = 90;
+	private final static int LABEL_WIDTH = 170;
 	private final static int MAX_PROFILES_TENTATIVES_PER_USER = 100;
 	private final static String ID_PROFILE = &quot;idProfile&quot;;
 
@@ -224,6 +226,7 @@
 			// orgUnitsList.setEmptyText(userToUpdate.getOrgUnitWithProfiles().getFullName());
 		} else
 			orgUnitsList.setEmptyText(I18N.CONSTANTS.adminUserCreationOrgUnitChoice());
+		
 		orgUnitsStore = new ListStore&lt;OrgUnitDTOLight&gt;();
 		orgUnitsList.setStore(orgUnitsStore);
 		cache.getOrganizationCache().get(new AsyncCallback&lt;OrgUnitDTOLight&gt;() {
@@ -242,7 +245,31 @@
 			}
 		});
 		add(orgUnitsList);
+		
+		/* User preference for default dashboard project type */
+		
+		projectPreferenceField = new SimpleComboBox&lt;String&gt;();
+		projectPreferenceField.add(I18N.CONSTANTS.createProjectTypeFunding2());
+		projectPreferenceField.add(I18N.CONSTANTS.createProjectTypePartner2());
+		projectPreferenceField.add(I18N.CONSTANTS.createProjectTypeNGO2());
+		projectPreferenceField.setFieldLabel(constants.adminUsersProjectPreference());
+		projectPreferenceField.setTriggerAction(TriggerAction.ALL);
+		projectPreferenceField.setAllowBlank(false);
+		if (userToUpdate != null &amp;&amp; userToUpdate.getProjectPreference() != null){
+			if (userToUpdate.getProjectPreference().equals(&quot;fnd&quot;)) {
+				projectPreferenceField.setSimpleValue(I18N.CONSTANTS.createProjectTypeFunding2());
+			} else if (userToUpdate.getProjectPreference().equals(&quot;lcl&quot;)) {
+				projectPreferenceField.setSimpleValue(I18N.CONSTANTS.createProjectTypePartner2());
+			} else {
+				projectPreferenceField.setSimpleValue(I18N.CONSTANTS.createProjectTypeNGO2());
+			}
+		} else {
+			// In-house project (NGO) displayed by default
+			projectPreferenceField.setSimpleValue(I18N.CONSTANTS.createProjectTypeNGO2());
+		}
+		add(projectPreferenceField);
 
+		
 		/*
 		 * *****************************************************************Profiles
 		 * ********************************
@@ -399,6 +426,17 @@
 			}
 		}
 
+		String projectPref = null;
+		if (projectPreferenceField.getSimpleValue() != null) {
+			if (projectPreferenceField.getSimpleValue().equals(I18N.CONSTANTS.createProjectTypeFunding2())) {
+				projectPref = &quot;fnd&quot;;
+			} else if (projectPreferenceField.getSimpleValue().equals(I18N.CONSTANTS.createProjectTypePartner2())) {
+				projectPref = &quot;lcl&quot;;
+			} else {
+				projectPref = &quot;ngo&quot;;
+			}
+		}
+		
 		final int orgUnit = orgUnitsList.getValue().getId();
 		final List&lt;Integer&gt; profiles = selectedProfilesIds;
 
@@ -418,6 +456,8 @@
 		newUserProperties.put(&quot;locale&quot;, locale);
 		newUserProperties.put(&quot;orgUnit&quot;, orgUnit);
 		newUserProperties.put(&quot;profiles&quot;, profiles);
+		newUserProperties.put(&quot;projectPref&quot;, projectPref);
+
 
 		dispatcher.execute(new CreateEntity(&quot;User&quot;, newUserProperties), null, new AsyncCallback&lt;CreateResult&gt;() {


Index: /src/main/java/org/sigmah/client/page/admin/users/AdminUsersView.java
===================================================================
--- /src/main/java/org/sigmah/client/page/admin/users/AdminUsersView.java	(Revision 1564)
+++ /src/main/java/org/sigmah/client/page/admin/users/AdminUsersView.java	Fri May 16 16:27:17 2014
@@ -439,6 +439,9 @@
 
 		column = new ColumnConfig(&quot;locale&quot;, I18N.CONSTANTS.adminUsersLocale(), 50);
 		configs.add(column);
+		
+		column = new ColumnConfig(&quot;projectPref&quot;, I18N.CONSTANTS.adminUsersProjectPreference(), 50);
+		configs.add(column);
 
 		column = new ColumnConfig(&quot;orgUnit&quot;, I18N.CONSTANTS.adminUsersOrgUnit(), 110);
 		column.setRenderer(new GridCellRenderer&lt;UserDTO&gt;() {



Index: /src/main/java/org/sigmah/server/policy/UserPolicy.java
===================================================================
--- /src/main/java/org/sigmah/server/policy/UserPolicy.java	(Revision 1564)
+++ /src/main/java/org/sigmah/server/policy/UserPolicy.java	Fri May 16 00:27:58 2014
@@ -78,6 +78,7 @@
         String firstName = properties.get(&quot;firstName&quot;);
         String locale = properties.get(&quot;locale&quot;);
         String password = properties.get(&quot;pwd&quot;);
+        String projectPref = properties.get(&quot;projectPref&quot;);
         int orgUnitId = (Integer) properties.get(&quot;orgUnit&quot;);
         List&lt;Integer&gt; profilesIds = properties.get(&quot;profiles&quot;);
 
@@ -93,6 +94,7 @@
             userToPersist = UserDAOImpl.createNewUser(email, name, locale);
             userToPersist.setFirstName(firstName);
             userToPersist.setOrganization(executingUser.getOrganization());
+            userToPersist.setProjectPreference(projectPref);
 
             if (password != null &amp;&amp; !password.isEmpty()) {
                 userToPersist.setHashedPassword(PasswordHelper.hashPassword(password));


Index: /src/main/java/org/sigmah/client/page/dashboard/ProjectsListPanel.java
===================================================================
--- /src/main/java/org/sigmah/client/page/dashboard/ProjectsListPanel.java	(Revision 1564)
+++ /src/main/java/org/sigmah/client/page/dashboard/ProjectsListPanel.java	Wed May 21 23:55:42 2014
@@ -25,10 +25,12 @@
 import org.sigmah.client.util.NumberUtils;
 import org.sigmah.shared.command.GetCategories;
 import org.sigmah.shared.command.GetProjects;
+import org.sigmah.shared.command.GetUsersByOrganization;
 import org.sigmah.shared.command.UpdateProjectFavorite;
 import org.sigmah.shared.command.result.CategoriesListResult;
 import org.sigmah.shared.command.result.CreateResult;
 import org.sigmah.shared.command.result.ProjectListResult;
+import org.sigmah.shared.command.result.UserListResult;
 import org.sigmah.shared.domain.ProjectModelType;
 import org.sigmah.shared.domain.element.BudgetSubFieldType;
 import org.sigmah.shared.domain.profile.GlobalPermissionEnum;
@@ -251,7 +253,6 @@
 
         // Default filters parameters.
         orgUnitsIds = new ArrayList&lt;Integer&gt;();
-        currentModelType = ProjectModelType.NGO;
 
         // Store.
         final ProjectStore projectStore = new ProjectStore();
@@ -419,10 +420,9 @@
         // Top panel
         final RadioGroup group = new RadioGroup(&quot;projectTypeFilter&quot;);
         group.setFireChangeEventOnSetValue(true);
-
+ 
         ngoRadio = new Radio();
         ngoRadio.setFireChangeEventOnSetValue(true);
-        ngoRadio.setValue(true);
         ngoRadio.setFieldLabel(ProjectModelType.getName(ProjectModelType.NGO));
         ngoRadio.addStyleName(&quot;toolbar-radio&quot;);
 
@@ -486,6 +486,39 @@
                 partnerRadio.setValue(true);
             }
         });
+        
+        // Display projects of type preferred by user on startup
+        // Set filters and tick radios
+        ngoRadio.setValue(false);
+        fundingRadio.setValue(false);
+        partnerRadio.setValue(false);
+        
+        GetUsersByOrganization cmd = new GetUsersByOrganization(
+        		authentication.getOrganizationId(), authentication.getUserId());
+		dispatcher.execute(cmd, null, new AsyncCallback&lt;UserListResult&gt;() {
+
+			@Override
+			public void onFailure(Throwable caught) {
+				// Default settings
+	        	ngoRadio.setValue(true);
+	            currentModelType = ProjectModelType.NGO;
+			}
+
+			@Override
+			public void onSuccess(UserListResult result) {
+				UserDTO authenticatedUser = result.getList().get(0);
+		        if (authenticatedUser.getProjectPreference().equals(&quot;ngo&quot;)) {
+		        	ngoRadio.setValue(true);
+		            currentModelType = ProjectModelType.NGO;
+		        } else if (authenticatedUser.getProjectPreference().equals(&quot;fnd&quot;)) {
+		        	fundingRadio.setValue(true);
+		            currentModelType = ProjectModelType.FUNDING;
+		        } else {
+		        	partnerRadio.setValue(true);
+		            currentModelType = ProjectModelType.LOCAL_PARTNER;
+		        }
+			}
+		});
 
         final HTML headLabel = new HTML(&quot;&amp;nbsp;&amp;nbsp;&quot; + I18N.CONSTANTS.projectTypeFilter() + &quot;: &quot;);
         headLabel.addStyleName(&quot;flexibility-element-label&quot;);
@@ -687,22 +720,16 @@
 								else
 								{
 									//Update local store
-									ProjectDTOLight resultProject =(ProjectDTOLight) result.getEntity();
+									ProjectDTOLight resultProject = (ProjectDTOLight)result.getEntity();
 									model.setFavoriteUsers(resultProject.getFavoriteUsers());
 									store.update(model);
 									
 									Notification.show(I18N.CONSTANTS.infoConfirmation(),
                                             I18N.CONSTANTS.projectStarred());
-								 
-																													
-								}
-								
-								
-							}
-                			
+																	
+								}			
+							}	
                 		});
-                    	                    	
-                 
                     }
                 });</pre></span>
<br />
<a href="project_pref_column.postgresqld2dd.sql?file_id=171&amp;type=bug"><img src="images/fileicons/generic.gif" alt="? file icon" width="16" height="16" border="0" /></a>&#160;<a href="project_pref_column.postgresqld2dd.sql?file_id=171&amp;type=bug">project_pref_column.postgresql.sql</a> [<a href="project_pref_column.postgresqld2dd.sql?file_id=171&amp;type=bug" target="_blank">^</a>] (103 bytes) <span class="italic">2014-05-22 21:48</span></td></tr><tr align="center"><td align="center" colspan="6"><table><tr class="vcenter"><td class="center"></td><td class="center"></td><td class="center"></td><td class="center"></td><td class="center"></td><td class="center"></td><td class="center"></td><td class="center"></td></tr></table></td></tr></table><br />

<div id="relationships_open"><table class="width100" cellspacing="1">
<tr class="row-2" valign="top">
	<td width="15%" class="form-title" colspan="2">
		<a href="#" onclick="ToggleDiv( 'relationships' ); return false;"
			><img border="0" src="images/minus.html" alt="-" /></a>&#160;Relationships	</td>
</tr>
<tr>
	<td colspan="2"><table border="0" width="100%" cellpadding="0" cellspacing="1"><tr bgcolor="#fcbdbd"><td><span class="nowrap">child of</span>&#160;</td><td><a href="view2695.html?id=516">0000516</a></td><td><span class="issue-status" title="open">new</span></td><td>&#160;</td><td>General User Interface improvement&#160;</td></tr>
</table></td>
</tr>
</table>

</div><div id="relationships_closed" class="hidden"><table class="width100" cellspacing="1">
<tr>
	<td class="form-title">
		<a href="#" onclick="ToggleDiv( 'relationships' ); return false;"
			><img border="0" src="images/plus.html" alt="+" /></a>&#160;Relationships	</td>
</tr>
</table>

</div>
<a name="bugnotes" id="bugnotes" /><br />

<div id="bugnotes_open"><table class="width100" cellspacing="1">
<tr>
	<td class="form-title" colspan="2">
<a href="#" onclick="ToggleDiv( 'bugnotes' ); return false;"
			><img border="0" src="images/minus.html" alt="-" /></a>&#160;		Notes	</td>
</tr>
<tr class="bugnote" id="c1410">
        <td class="bugnote-public">
				<span class="small">(<a href="viewd367.html?id=426#c1410" title="Direct link to note">0001410)</a></span><br />
		<a href="view_user_page3ebc.html?id=64">somzzz</a>		<span class="small">(developer)</span>
				<br />
		<span class="small">2014-05-22 22:31</span><br />
				<br /><div class="small">
				</div>
	</td>
	<td class="bugnote-note-public">
		Uploaded the patch for this issue. Main changes:<br />
- added a new column for the user project preference in the UserLogin table (where details about the user are kept); at present the values are: ngo (for In-house projects), lcl (for Local partner) and fnd (for Source of Funding); <br />
- modified the edit-user form in Administration-&gt;Users to support selecting a preferred type of projects (drop-down);<br />
- modified the projects displayed on the dashboard at startup accordingly;<br />
<br />
Normally, running Sigmah with this patch should automatically add the new column to the database. However if any errors occur (column should not be null, etc), I uploaded a SQL script to run on the database before testing this patch. The script adds the new column to the UserLogin table and populates it with the default value (for In-house projects).<br />
<br />
TODO (when the patch is integrated):<br />
- update the wiki<br />
- update the installation sql scripts<br />
<br />
Suggestion for improvement(create another issue maybe?):<br />
Users with no administration privileges can't change any details about their profile. Thus, they can't change their preferred project type either, unless they ask their administrator.<br />
&#160;<br />
Proposal: <br />
- create a &quot;Edit profile&quot; pop-up on the Dashboard which even the least privileged user can access;<br />
- this pop-up should allow the user to edit his trivial account information: project preference, locale language, name (to be decided);	</td>
</tr>
<tr class="spacer">
	<td colspan="2"></td>
</tr>
</table>

</div><div id="bugnotes_closed" class="hidden">
<table class="width100" cellspacing="1">
<tr>
	<td class="form-title" colspan="2">
		<a href="#" onclick="ToggleDiv( 'bugnotes' ); return false;"
			><img border="0" src="images/plus.html" alt="+" /></a>&#160;		Notes	</td>
</tr>
</table>
</div>
<a name="history" id="history" /><br />

<div id="history_open"><table class="width100" cellspacing="0">
<tr>
	<td class="form-title" colspan="4">
<a href="#" onclick="ToggleDiv( 'history' ); return false;"
			><img border="0" src="images/minus.html" alt="-" /></a>&#160;Issue History	</td>
</tr>
<tr class="row-category-history">
	<td class="small-caption">
		Date Modified	</td>
	<td class="small-caption">
		Username	</td>
	<td class="small-caption">
		Field	</td>
	<td class="small-caption">
		Change	</td>
</tr>
<tr class="row-2">
	<td class="small-caption">
		2011-12-13 15:23	</td>
	<td class="small-caption">
		<a href="view_user_page0b30.html?id=2">osarrat</a>	</td>
	<td class="small-caption">
		New Issue	</td>
	<td class="small-caption">
			</td>
</tr>
<tr class="row-1">
	<td class="small-caption">
		2014-03-10 14:49	</td>
	<td class="small-caption">
		<a href="view_user_page0b30.html?id=2">osarrat</a>	</td>
	<td class="small-caption">
		Relationship added	</td>
	<td class="small-caption">
		child of 0000516	</td>
</tr>
<tr class="row-2">
	<td class="small-caption">
		2014-03-10 14:50	</td>
	<td class="small-caption">
		<a href="view_user_page0b30.html?id=2">osarrat</a>	</td>
	<td class="small-caption">
		OS	</td>
	<td class="small-caption">
		Windows XP =&gt; NA	</td>
</tr>
<tr class="row-1">
	<td class="small-caption">
		2014-03-10 14:50	</td>
	<td class="small-caption">
		<a href="view_user_page0b30.html?id=2">osarrat</a>	</td>
	<td class="small-caption">
		Browser	</td>
	<td class="small-caption">
		Mozilla Firefox 1.0 (Phoenix) =&gt; NA	</td>
</tr>
<tr class="row-2">
	<td class="small-caption">
		2014-03-10 14:50	</td>
	<td class="small-caption">
		<a href="view_user_page0b30.html?id=2">osarrat</a>	</td>
	<td class="small-caption">
		Target Version	</td>
	<td class="small-caption">
		unplanned =&gt; 3.1	</td>
</tr>
<tr class="row-1">
	<td class="small-caption">
		2014-05-15 23:40	</td>
	<td class="small-caption">
		<a href="view_user_page3ebc.html?id=64">somzzz</a>	</td>
	<td class="small-caption">
		Assigned To	</td>
	<td class="small-caption">
		 =&gt; somzzz	</td>
</tr>
<tr class="row-2">
	<td class="small-caption">
		2014-05-15 23:40	</td>
	<td class="small-caption">
		<a href="view_user_page3ebc.html?id=64">somzzz</a>	</td>
	<td class="small-caption">
		Status	</td>
	<td class="small-caption">
		new =&gt; assigned	</td>
</tr>
<tr class="row-1">
	<td class="small-caption">
		2014-05-22 21:47	</td>
	<td class="small-caption">
		<a href="view_user_page3ebc.html?id=64">somzzz</a>	</td>
	<td class="small-caption">
		File Added: 000426.patch	</td>
	<td class="small-caption">
			</td>
</tr>
<tr class="row-2">
	<td class="small-caption">
		2014-05-22 21:48	</td>
	<td class="small-caption">
		<a href="view_user_page3ebc.html?id=64">somzzz</a>	</td>
	<td class="small-caption">
		File Added: project_pref_column.postgresql.sql	</td>
	<td class="small-caption">
			</td>
</tr>
<tr class="row-1">
	<td class="small-caption">
		2014-05-22 22:31	</td>
	<td class="small-caption">
		<a href="view_user_page3ebc.html?id=64">somzzz</a>	</td>
	<td class="small-caption">
		Note Added: 0001410	</td>
	<td class="small-caption">
			</td>
</tr>
<tr class="row-2">
	<td class="small-caption">
		2014-12-10 13:18	</td>
	<td class="small-caption">
		<a href="view_user_page0b30.html?id=2">osarrat</a>	</td>
	<td class="small-caption">
		Target Version	</td>
	<td class="small-caption">
		3.1 =&gt; 2.0	</td>
</tr>
<tr class="row-1">
	<td class="small-caption">
		2015-04-07 12:44	</td>
	<td class="small-caption">
		<a href="view_user_page0b30.html?id=2">osarrat</a>	</td>
	<td class="small-caption">
		Target Version	</td>
	<td class="small-caption">
		2.0 =&gt; next-but-one	</td>
</tr>
</table>
</div><div id="history_closed" class="hidden"><table class="width100" cellspacing="0">
<tr>
	<td class="form-title" colspan="4">
	<a href="#" onclick="ToggleDiv( 'history' ); return false;"
			><img border="0" src="images/plus.html" alt="+" /></a>&#160;Issue History	</td>
</tr>
</table>

</div>	<br />
	<hr size="1" />
<table border="0" width="100%" cellspacing="0" cellpadding="0"><tr valign="top"><td>	<address>Copyright &copy; 2000 - 2018 MantisBT Team</address>
</td><td>
	<div align="right"><a href="http://www.mantisbt.org/" title="Free Web Based Bug Tracker"><img src="images/mantis_logo.html" width="145" height="50" alt="Powered by Mantis Bugtracker" border="0" /></a></div>
</td></tr></table>
</body>

<!-- Mirrored from www.sigmah.org/issues/view.php?id=426&history=1 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 25 Jul 2018 15:50:55 GMT -->
</html>
