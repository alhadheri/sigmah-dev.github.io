<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>

<!-- Mirrored from www.sigmah.org/issues/print_bug_page.php?bug_id=1064 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 25 Jul 2018 15:46:42 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
	<link rel="stylesheet" type="text/css" href="css/default.css" />
	<script type="text/javascript"><!--
		if(document.layers) {document.write("<style>td{padding:0px;}<\/style>")}
	// --></script>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
	<meta http-equiv="Pragma" content="no-cache" />
	<meta http-equiv="Cache-Control" content="no-cache" />
	<meta http-equiv="Pragma-directive" content="no-cache" />
	<meta http-equiv="Cache-Directive" content="no-cache" />
	<meta http-equiv="Expires" content="Wed, 25 Jul 2018 15:12:56 GMT" />
	<link rel="shortcut icon" href="images/favicon.html" type="image/x-icon" />
	<link rel="search" type="application/opensearchdescription+xml" title="MantisBT: Text Search" href="browser_search_plugin84ae.html?type=text" />	<link rel="search" type="application/opensearchdescription+xml" title="MantisBT: Issue Id" href="browser_search_pluginb70d.html?type=id" />	<title>0001064: Budget ratio field not updated if source contains computation with computation of linked projects - Sigmah Issue Tracker</title>
<script type="text/javascript" src="javascript/min/common.html"></script>
<script type="text/javascript">var loading_lang = "Loading...";</script><script type="text/javascript" src="javascript/min/ajax.js"></script>
<link rel="stylesheet" type="text/css" href="plugin_filea93c.css?file=Source/style.css"/></head>
<body>
<br /><table class="width100" cellspacing="1"><tr><td class="form-title" colspan="6"><div class="center">Sigmah Issue Tracker - sigmah</div></td></tr><tr><td class="form-title" colspan="6">View Issue Details</td></tr><tr><td class="print-spacer" colspan="6"><hr size="1" /></td></tr><tr class="print-category"><td class="print" width="16%">ID</td><td class="print" width="16%">Project</td><td class="print" width="16%">Category</td><td class="print" width="16%">View Status</td><td class="print" width="16%">Date Submitted</td><td class="print" width="16%">Last Update</td></tr><tr class="print"><td class="print">0001064</td><td class="print">sigmah</td><td class="print">Project</td><td class="print">public</td><td class="print">2017-01-31 17:30</td><td class="print">2017-12-22 10:12</td></tr><tr><td class="print-spacer" colspan="6"><hr size="1" /></td></tr><tr class="print"><td class="print-category">Reporter</td><td class="print">osarrat</td><td class="print" colspan="4">&#160;</td></tr><tr class="print"><td class="print-category">Assigned To</td><td class="print">rcalabro</td><td class="print" colspan="4">&#160;</td></tr><tr class="print"><td class="print-category">Priority</td><td class="print">urgent</td><td class="print-category">Severity</td><td class="print">major</td><td class="print-category">Reproducibility</td><td class="print">always</td></tr><tr class="print"><td class="print-category">Status</td><td class="print">assigned</td><td class="print-category">Resolution</td><td class="print">reopened</td><td class="print" colspan="2">&#160;</td></tr><tr class="print"><td class="print-category">Platform</td><td class="print"></td><td class="print-category">OS</td><td class="print"></td><td class="print-category">OS Version</td><td class="print"></td></tr><tr class="print"><td class="print-category">Product Version</td><td class="print">2.2</td><td class="print" colspan="4">&#160;</td></tr><tr><td class="print-category">Target Version</td><td class="print">2.3</td><td class="print-category">Fixed in Version</td><td class="print"></td><td class="print" colspan="2">&#160;</td></tr><tr class="print"><td class="print-category">User Report URL</td><td class="print" colspan="4"></td></tr><tr class="print"><td class="print-category">OS</td><td class="print" colspan="4">NA</td></tr><tr class="print"><td class="print-category">Other OS</td><td class="print" colspan="4"></td></tr><tr class="print"><td class="print-category">Browser</td><td class="print" colspan="4">NA</td></tr><tr class="print"><td class="print-category">Other browser</td><td class="print" colspan="4"></td></tr><tr class="print"><td class="print-category">ScreenURL</td><td class="print" colspan="4"></td></tr><tr class="print"><td class="print-category">(ActivityInfo) Noticed in revision</td><td class="print" colspan="4"></td></tr><tr><td class="print-spacer" colspan="6"><hr size="1" /></td></tr><tr class="print"><td class="print-category">Summary</td><td class="print" colspan="5">0001064: Budget ratio field not updated if source contains computation with computation of linked projects</td></tr><tr class="print"><td class="print-category">Description</td><td class="print" colspan="5">On v2.2-rc2, a project budget ratio field won't be updated if one of its data source contains a computation field which itself contains as part of its formula a computation field with linked projects.</td></tr><tr class="print"><td class="print-category">Steps To Reproduce</td><td class="print" colspan="5">Prerequistes :<br />
- project model &quot;source&quot; which has a &quot;planned&quot; and a &quot;spent&quot; number fields used as part of the budget ratio.<br />
- project model &quot;target&quot; which has the following field:<br />
&#160;&#160;&#160;&#160;* &quot;sum of planned&quot; computation field whose formula is &quot;fundedProjects(source).sum(planned)&quot;<br />
&#160;&#160;&#160;&#160;* &quot;sum of spent&quot; computation field whose formula is &quot;fundedProjects(source).sum(spent)&quot;<br />
&#160;&#160;&#160;&#160;* &quot;expenditures&quot; number field<br />
&#160;&#160;&#160;&#160;* &quot;available&quot; computation field whose formula is &quot;sum_of_planned - sum_of_spent&quot;<br />
&#160;&#160;&#160;&#160;* budget ratio configured as the ratio of &quot;expenditures&quot; to &quot;available&quot;<br />
<br />
1. create a &quot;target&quot; project<br />
2. from the project management board, create a new funded project by using the &quot;source&quot; project model and give a value different than 0 for the planned budget of this project upon creation<br />
3. go to the details sub-tab of this &quot;target&quot; project<br />
=&gt; your &quot;budget ratio&quot; budget is set to 0<br />
4. go to the details sub-tab of your &quot;source&quot; project<br />
5. edit the &quot;planned&quot; and &quot;spent&quot; number fields to any value different than 0<br />
6. go back to the details sub-tab of your &quot;target&quot; project<br />
=&gt; your &quot;available&quot; field is properly computed<br />
7. set your expenditures to any value different than 0, and click on the &quot;Save&quot; button<br />
=&gt; your &quot;budget ratio&quot; is not updated as it should</td></tr><tr class="print"><td class="print-category">Additional Information</td><td class="print" colspan="5"></td></tr><tr class="print"><td class="print-category">Tags</td><td class="print" colspan="5">No tags attached.</td></tr><tr class="print"><td class="print-category">Relationships</td><td class="print" colspan="5"></td></tr><tr class="print"><td class="print-category">Attached Files</td><td class="print" colspan="5"><img src="images/fileicons/png.gif" alt="png" />&#160;BudgetRatioNotUpdated.PNG (6,069) <span class="italic">2017-01-31 17:30</span><br />http://www.sigmah.org/issues/file_download.php?file_id=387&amp;type=bug<br /><img src="BudgetRatioNotUpdated742c.PNG?file_id=387&amp;type=bug" alt="png" border="0" /><br /><br /><img src="images/fileicons/zip.gif" alt="zip" />&#160;sigmah_2.2-demo-altered--dbANDfiles.zip (413,483) <span class="italic">2017-04-28 17:21</span><br />http://www.sigmah.org/issues/file_download.php?file_id=404&amp;type=bug<br /><img src="images/fileicons/png.gif" alt="png" />&#160;Bug1064PartialFixDemonstation.png (6,378) <span class="italic">2017-04-28 17:24</span><br />http://www.sigmah.org/issues/file_download.php?file_id=405&amp;type=bug<br /><img src="Bug1064PartialFixDemonstation8f64.png?file_id=405&amp;type=bug" alt="png" border="0" /><br /></td></tr><tr><td class="print-spacer" colspan="6"><hr size="1" /></td></tr><tr><td class="form-title">Issue History</td></tr><tr class="print-category"><td class="row-category-history">Date Modified</td><td class="row-category-history">Username</td><td class="row-category-history">Field</td><td class="row-category-history">Change</td></tr><tr class="print"><td class="print">2017-01-31 17:30</td><td class="print"><a href="view_user_page0b30.html?id=2">osarrat</a></td><td class="print">New Issue</td><td class="print"></td></tr><tr class="print"><td class="print">2017-01-31 17:30</td><td class="print"><a href="view_user_page0b30.html?id=2">osarrat</a></td><td class="print">Status</td><td class="print">new =&gt; assigned</td></tr><tr class="print"><td class="print">2017-01-31 17:30</td><td class="print"><a href="view_user_page0b30.html?id=2">osarrat</a></td><td class="print">Assigned To</td><td class="print"> =&gt; rcalabro</td></tr><tr class="print"><td class="print">2017-01-31 17:30</td><td class="print"><a href="view_user_page0b30.html?id=2">osarrat</a></td><td class="print">File Added: BudgetRatioNotUpdated.PNG</td><td class="print"></td></tr><tr class="print"><td class="print">2017-02-10 10:15</td><td class="print"><a href="view_user_pagef3bc.html?id=92">bleny</a></td><td class="print">Changeset attached</td><td class="print"> =&gt; sigmah master 18fdd666</td></tr><tr class="print"><td class="print">2017-02-10 10:15</td><td class="print"></td><td class="print">Changeset attached</td><td class="print"> =&gt; sigmah master 2e4236b9</td></tr><tr class="print"><td class="print">2017-02-10 10:15</td><td class="print"><a href="view_user_pagec3c9.html?id=8">anonymous</a></td><td class="print">Note Added: 0002384</td><td class="print"></td></tr><tr class="print"><td class="print">2017-02-10 10:15</td><td class="print"><a href="view_user_pagec3c9.html?id=8">anonymous</a></td><td class="print">Status</td><td class="print">assigned =&gt; resolved</td></tr><tr class="print"><td class="print">2017-02-10 10:15</td><td class="print"><a href="view_user_pagec3c9.html?id=8">anonymous</a></td><td class="print">Resolution</td><td class="print">open =&gt; fixed</td></tr><tr class="print"><td class="print">2017-04-28 17:07</td><td class="print"><a href="view_user_page0b30.html?id=2">osarrat</a></td><td class="print">Note Added: 0002466</td><td class="print"></td></tr><tr class="print"><td class="print">2017-04-28 17:07</td><td class="print"><a href="view_user_page0b30.html?id=2">osarrat</a></td><td class="print">Status</td><td class="print">resolved =&gt; feedback</td></tr><tr class="print"><td class="print">2017-04-28 17:07</td><td class="print"><a href="view_user_page0b30.html?id=2">osarrat</a></td><td class="print">Resolution</td><td class="print">fixed =&gt; reopened</td></tr><tr class="print"><td class="print">2017-04-28 17:08</td><td class="print"><a href="view_user_page0b30.html?id=2">osarrat</a></td><td class="print">Note Edited: 0002466</td><td class="print">bug_revision_view_page.php?bugnote_id=2466#r1016</td></tr><tr class="print"><td class="print">2017-04-28 17:21</td><td class="print"><a href="view_user_page0b30.html?id=2">osarrat</a></td><td class="print">File Added: sigmah_2.2-demo-altered--dbANDfiles.zip</td><td class="print"></td></tr><tr class="print"><td class="print">2017-04-28 17:24</td><td class="print"><a href="view_user_page0b30.html?id=2">osarrat</a></td><td class="print">File Added: Bug1064PartialFixDemonstation.png</td><td class="print"></td></tr><tr class="print"><td class="print">2017-04-28 17:26</td><td class="print"><a href="view_user_page0b30.html?id=2">osarrat</a></td><td class="print">Note Added: 0002467</td><td class="print"></td></tr><tr class="print"><td class="print">2017-04-28 17:26</td><td class="print"><a href="view_user_page0b30.html?id=2">osarrat</a></td><td class="print">Status</td><td class="print">feedback =&gt; assigned</td></tr><tr class="print"><td class="print">2017-12-22 10:12</td><td class="print"><a href="view_user_page0b30.html?id=2">osarrat</a></td><td class="print">Target Version</td><td class="print">2.2 =&gt; 2.3</td></tr></table>
<br />
<table class="width100" cellspacing="1">
<tr>
	<td class="form-title" colspan="2">
		Notes	</td>
</tr>
<tr>
	<td class="print-spacer" colspan="2">
		<hr size="1" />
	</td>
</tr>
<tr>
	<td class="nopad" valign="top" width="20%">
		<table class="hide" cellspacing="1">
		<tr>
			<td class="print">
				(0002384)
			</td>
		</tr>
		<tr>
			<td class="print">
				<a href="view_user_pagec3c9.html?id=8">anonymous</a>&#160;&#160;&#160;
			</td>
		</tr>
		<tr>
			<td class="print">
				2017-02-10 10:15&#160;&#160;&#160;
							</td>
		</tr>
		</table>
	</td>
	<td class="nopad" valign="top" width="85%">
		<table class="hide" cellspacing="1">
		<tr>
			<td class="print">
				Fix committed to master branch.			</td>
		</tr>
		</table>
	</td>
</tr>
<tr>
	<td class="print-spacer" colspan="2">
		<hr size="1" />
	</td>
</tr>
<tr>
	<td class="nopad" valign="top" width="20%">
		<table class="hide" cellspacing="1">
		<tr>
			<td class="print">
				(0002466)
			</td>
		</tr>
		<tr>
			<td class="print">
				<a href="view_user_page0b30.html?id=2">osarrat</a>&#160;&#160;&#160;
			</td>
		</tr>
		<tr>
			<td class="print">
				2017-04-28 17:07&#160;&#160;&#160;
				<br />(edited on:&#32;2017-04-28 17:08)			</td>
		</tr>
		</table>
	</td>
	<td class="nopad" valign="top" width="85%">
		<table class="hide" cellspacing="1">
		<tr>
			<td class="print">
				Actually, this bug is not yet completely fixed on v2.2-rc5.<br />
<br />
In the described scenario, we get a situation where the value of the &quot;available&quot; computation field is fixed. It remains set to the value of the planned budget given in the project creation popup, and cannot changed.<br />
<br />
If I create an &quot;available2&quot; duplicate of this &quot;available&quot; field, and if I don't use this &quot;available2&quot; computation field as part of the budget ratio, then the behavior of &quot;available2&quot; is almost normal. Initially, its value is set to 0 even if &quot;sum_of_planned - sum_of_spent&quot; computation result is different than 0. That is not normal. <br />
But afterwards, if I change both of the &quot;source&quot; &quot;planned&quot; &amp; &quot;spent&quot; values, &quot;available2&quot; will display the right computation result (but &quot;available&quot; keeps its value frozen).<br />
<br />
			</td>
		</tr>
		</table>
	</td>
</tr>
<tr>
	<td class="print-spacer" colspan="2">
		<hr size="1" />
	</td>
</tr>
<tr>
	<td class="nopad" valign="top" width="20%">
		<table class="hide" cellspacing="1">
		<tr>
			<td class="print">
				(0002467)
			</td>
		</tr>
		<tr>
			<td class="print">
				<a href="view_user_page0b30.html?id=2">osarrat</a>&#160;&#160;&#160;
			</td>
		</tr>
		<tr>
			<td class="print">
				2017-04-28 17:26&#160;&#160;&#160;
							</td>
		</tr>
		</table>
	</td>
	<td class="nopad" valign="top" width="85%">
		<table class="hide" cellspacing="1">
		<tr>
			<td class="print">
				Just attached a sigmah_2.2-demo-altered--dbANDfiles.zip  containing a demo database with a &quot;target2&quot; project from a &quot;target1064&quot; project model demonstrating the remaining part of the issue.			</td>
		</tr>
		</table>
	</td>
</tr>
</table>
</body>

<!-- Mirrored from www.sigmah.org/issues/print_bug_page.php?bug_id=1064 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 25 Jul 2018 15:46:42 GMT -->
</html>
